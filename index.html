<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Age Calculator - Vedantic & Theosophical Analysis</title>
    
    <!-- Security Headers via Meta Tags -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://nominatim.openstreetmap.org; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self' https://nominatim.openstreetmap.org; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="no-referrer">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <!-- SEO & Privacy Compliant Meta Tags -->
    <meta name="description" content="Discover your soul's evolutionary journey through 777 incarnations using Vedantic wisdom and Theosophical teachings. GDPR-compliant, no data storage.">
    <meta name="keywords" content="soul age, 777 incarnations, Vedanta, Theosophy, spiritual evolution, Jaimini astrology, karma, reincarnation">
    <meta name="author" content="Soul Age Calculator">
    <meta name="robots" content="index, follow">
    
    <!-- Privacy & Security -->
    <meta name="privacy" content="No user data collected or stored">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Soul Age Calculator - Discover Your Spiritual Evolution">
    <meta property="og:description" content="Calculate your position in the 777-incarnation journey using ancient Vedantic and Theosophical wisdom.">
    
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #06B6D4;
            --accent: #F59E0B;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --text: #1F2937;
            --text-light: #6B7280;
            --border: #E5E7EB;
            --bg-light: #F9FAFB;
            --shadow: rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --sacred-gold: #D97706;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px var(--shadow);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            color: #6B7280;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .privacy-notice {
            display: inline-block;
            background: #10B98120;
            color: #065F46;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Tabs Navigation */
        .tabs-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 10px 25px var(--shadow);
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 24px;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6B7280;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background: #F3F4F6;
        }

        .tab-btn.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
        }

        .tab-icon {
            font-size: 1.2rem;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sections */
        .section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px var(--shadow);
            position: relative;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--bg-light);
        }

        .section-icon {
            font-size: 2rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--text);
            font-weight: 700;
        }

        /* Form Styles */
        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .time-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .unknown-time-btn {
            background: var(--bg-light);
            color: var(--text-light);
            padding: 10px 20px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .unknown-time-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .location-input-container {
            position: relative;
        }

        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }

        .autocomplete-item:hover {
            background: #F3F4F6;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .autocomplete-item .location-name {
            font-weight: 600;
            color: var(--text);
        }

        .autocomplete-item .location-details {
            display: block;
            font-size: 0.85rem;
            color: #6B7280;
            margin-top: 2px;
        }

        .search-status {
            padding: 10px 15px;
            color: #6B7280;
            font-size: 0.9rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .search-status.loading {
            color: var(--primary);
        }

        /* Survey Questions */
        .survey-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-card {
            background: #F9FAFB;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
        }

        .question-card select {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        /* Questions explanation styles */
        .questions-explanation {
            display: grid;
            gap: 20px;
            margin: 25px 0;
        }

        .question-explanation-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .question-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .spiritual-basis {
            color: var(--text);
            line-height: 1.6;
        }

        .spiritual-basis strong {
            color: var(--sacred-gold);
        }

        .spiritual-basis ul {
            margin-top: 8px;
        }

        .spiritual-basis li {
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        /* Validation */
        .validation-icon {
            display: none;
            font-size: 1.2rem;
            margin-left: 10px;
        }

        .validation-icon.valid {
            display: inline;
            color: var(--success);
        }

        .validation-icon.invalid {
            display: inline;
            color: var(--error);
        }

        .error-message {
            display: none;
            color: var(--error);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .error-message.show {
            display: block;
        }

        /* Calculate Button */
        .calculate-btn {
            background: var(--gradient);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 250px;
            box-shadow: 0 10px 25px rgba(147, 51, 234, 0.3);
        }

        .calculate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(147, 51, 234, 0.4);
        }

        .calculate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Results Display */
        .results-container {
            display: none;
        }

        .results-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .soul-age-display {
            background: var(--gradient);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .soul-age-display::before {
            content: '‚ò∏';
            position: absolute;
            top: -50px;
            right: -50px;
            font-size: 200px;
            opacity: 0.1;
        }

        .soul-age-number {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .soul-stage {
            font-size: 1.5rem;
            margin-bottom: 20px;
            opacity: 0.95;
        }

        .soul-stage-description {
            font-size: 1.1rem;
            margin-bottom: 25px;
            opacity: 0.9;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .incarnation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Stage Descriptions Section */
        .stage-description-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid var(--primary);
        }

        .stage-description-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stage-description-text {
            line-height: 1.7;
            color: var(--text);
            margin-bottom: 15px;
        }

        .stage-traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .trait-group {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 10px;
        }

        .trait-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .trait-list {
            font-size: 0.95rem;
            color: var(--text-light);
            line-height: 1.5;
        }

        /* Confidence Indicators */
        .confidence-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .confidence-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .confidence-dot.confidence-high {
            background: var(--success);
        }

        .confidence-dot.confidence-medium {
            background: var(--warning);
        }

        .confidence-dot.confidence-low {
            background: var(--error);
        }

        .confidence-text {
            font-weight: 600;
            color: white;
        }

        /* Understanding Tab Styles */
        .wisdom-card {
            background: linear-gradient(135deg, #F9FAFB 0%, #F3F4F6 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid var(--sacred-gold);
        }

        .wisdom-header {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 15px;
        }

        .evolution-stages {
            display: grid;
            gap: 20px;
            margin-top: 25px;
        }

        .stage-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            border-left: 4px solid;
        }

        .stage-card.infant { border-left-color: #EF4444; }
        .stage-card.baby { border-left-color: #F59E0B; }
        .stage-card.young { border-left-color: #10B981; }
        .stage-card.mature { border-left-color: #3B82F6; }
        .stage-card.old { border-left-color: #8B5CF6; }

        .stage-number {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stage-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .stage-range {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .stage-traits-list {
            margin-top: 15px;
        }

        .stage-traits-list li {
            margin-bottom: 5px;
            color: var(--text-light);
        }

        /* FAQ Styles */
        .faq-section {
            margin-top: 30px;
        }

        .faq-category {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .faq-category-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: color 0.3s ease;
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-answer {
            display: none;
            padding-top: 15px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .faq-answer.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .faq-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .faq-toggle.rotated {
            transform: rotate(180deg);
        }

        /* Characteristics Display */
        .characteristics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .characteristic-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        .characteristic-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .characteristic-list {
            list-style: none;
        }

        .characteristic-list li {
            padding: 5px 0;
            color: var(--text-light);
            position: relative;
            padding-left: 20px;
        }

        .characteristic-list li:before {
            content: '‚Ä¢';
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Jaimini insights styling */
        .jaimini-insights {
            margin-top: 20px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .jaimini-insights h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .jaimini-insights p {
            margin: 0;
            font-style: italic;
            color: #4a5568;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .tabs-nav {
                flex-direction: column;
            }
            
            .time-grid {
                grid-template-columns: 1fr;
            }
            
            .soul-age-number {
                font-size: 3rem;
            }
            
            .incarnation-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üïâÔ∏è Soul Age Calculator</h1>
            <p class="subtitle">Discover Your Position in the 777-Incarnation Journey</p>
            <p style="color: #6B7280; font-size: 0.95rem;">
                Based on Ancient Vedantic Wisdom & Theosophical Teachings
            </p>
            <div class="privacy-notice">
                üîí Completely Private - No Data Stored
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tabs-nav">
            <button class="tab-btn active" onclick="switchTab('calculator-tab', this)">
                <span class="tab-icon">üßÆ</span>
                Calculator
            </button>
            <button class="tab-btn" onclick="switchTab('understanding-tab', this)">
                <span class="tab-icon">üïâÔ∏è</span>
                Understanding
            </button>
            <button class="tab-btn" onclick="switchTab('jaimini-tab', this)">
                <span class="tab-icon">üîÆ</span>
                Jaimini Analysis
            </button>
            <button class="tab-btn" onclick="switchTab('faq-tab', this)">
                <span class="tab-icon">‚ùì</span>
                FAQ
            </button>
        </div>

        <!-- Tab 1: Calculator -->
        <div id="calculator-tab" class="tab-content active">
            <!-- Birth Information -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üìÖ</span>
                    <h2 class="section-title">Birth Information</h2>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Date *</label>
                    <input type="date" id="birthDate" class="input-field" onchange="validateDate()" required>
                    <span id="dateValidation" class="validation-icon">‚úì</span>
                    <div id="dateError" class="error-message"></div>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Time (Optional - defaults to noon if not provided)</label>
                    <div class="time-grid">
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">Hour</label>
                            <select id="birthHour" class="input-field" onchange="validateTime()">
                                <option value="">Hour</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">Minute</label>
                            <input type="number" id="birthMinute" class="input-field" 
                                   placeholder="Min" 
                                   min="0" 
                                   max="59" 
                                   onchange="validateTime()"
                                   oninput="validateTime()">
                        </div>
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">AM/PM</label>
                            <select id="ampm" class="input-field" onchange="validateTime()">
                                <option value="">AM/PM</option>
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="unknown-time-btn" onclick="useUnknownTime()">
                        Don't Know Time - Use Noon
                    </button>
                    <span id="timeValidation" class="validation-icon">‚úì</span>
                    <div id="timeError" class="error-message"></div>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Location *</label>
                    <div class="location-input-container">
                        <input type="text" 
                               id="birthLocation" 
                               class="input-field" 
                               placeholder="e.g., New York, London, Mumbai..."
                               onchange="validateLocation()"
                               oninput="searchLocation()"
                               autocomplete="off"
                               required>
                        <div id="locationAutocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <span id="locationValidation" class="validation-icon">‚úì</span>
                    <div id="locationError" class="error-message"></div>
                </div>
            </div>

            <!-- Why Answer Authentically Section -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üéØ</span>
                    <h2 class="section-title">Why Answer These Questions Authentically?</h2>
                </div>
                
                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>‚öñÔ∏è</span>
                        <span>Your Answers Directly Impact Your Soul Age Calculation</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563; margin-bottom: 15px;">
                        Each question can shift your calculated soul age by <strong>hundreds of incarnations</strong> because they measure your current <strong>level of consciousness</strong> - which in spiritual traditions matters more than chronological experience. Here's the deeper wisdom behind each question:
                    </p>
                </div>

                <div class="questions-explanation">
                    <div class="question-explanation-card">
                        <div class="question-title">üåü "What drives you most in life?"</div>
                        <div class="spiritual-basis">
                            <strong>Vedantic Basis:</strong> Maps to the <em>Purusharthas</em> (four life goals):
                            <ul style="margin-top: 8px; padding-left: 20px; color: #6B7280;">
                                <li><strong>Survival/Security</strong> ‚Üí Infant Soul: Basic <em>Artha</em> (material security)</li>
                                <li><strong>Pleasure/Achievement</strong> ‚Üí Young Soul: <em>Kama</em> and advanced <em>Artha</em></li>
                                <li><strong>Relationships</strong> ‚Üí Mature Soul: <em>Dharma</em> through emotional connection</li>
                                <li><strong>Spiritual Growth</strong> ‚Üí Old Soul: <em>Moksha</em> (liberation) seeking</li>
                            </ul>
                        </div>
                    </div>

                    <div class="question-explanation-card">
                        <div class="question-title">‚öîÔ∏è "How do you handle conflict?"</div>
                        <div class="spiritual-basis">
                            <strong>Theosophical Teaching:</strong> Helena Blavatsky taught soul evolution through handling opposition:
                            <ul style="margin-top: 8px; padding-left: 20px; color: #6B7280;">
                                <li><strong>Avoid/Fight</strong> ‚Üí Infant/Baby Soul: Fear or tribal responses</li>
                                <li><strong>Compete strategically</strong> ‚Üí Young Soul: Ego-driven power dynamics</li>
                                <li><strong>Understand perspectives</strong> ‚Üí Mature Soul: Emotional intelligence</li>
                                <li><strong>Transcend entirely</strong> ‚Üí Old Soul: Witness consciousness, non-attachment</li>
                            </ul>
                        </div>
                    </div>

                    <div class="question-explanation-card">
                        <div class="question-title">üí∞ "Relationship with material possessions?"</div>
                        <div class="spiritual-basis">
                            <strong>Bhagavad Gita Wisdom:</strong> Stages of detachment from materialism:
                            <ul style="margin-top: 8px; padding-left: 20px; color: #6B7280;">
                                <li><strong>Essential for security</strong> ‚Üí Infant Soul: <em>Tamasic</em> attachment</li>
                                <li><strong>Success and status</strong> ‚Üí Young Soul: Peak <em>Rajasic</em> materialism</li>
                                <li><strong>Tools for purpose</strong> ‚Üí Mature/Old Soul: <em>Sattvic</em> relationship</li>
                                <li><strong>Feel like burden</strong> ‚Üí Old Soul: Moving toward <em>Sannyasa</em> (renunciation)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="question-explanation-card">
                        <div class="question-title">üìö "How do you learn best?"</div>
                        <div class="spiritual-basis">
                            <strong>Theosophical Learning Evolution:</strong> Annie Besant's teachings on consciousness development:
                            <ul style="margin-top: 8px; padding-left: 20px; color: #6B7280;">
                                <li><strong>Repetition/Rules</strong> ‚Üí Infant/Baby Soul: Concrete operational thinking</li>
                                <li><strong>Direct experience</strong> ‚Üí Young Soul: Empirical learning</li>
                                <li><strong>Deep reflection</strong> ‚Üí Mature Soul: Introspective wisdom</li>
                                <li><strong>Intuition/Insight</strong> ‚Üí Old Soul: <em>Buddhic</em> plane access</li>
                            </ul>
                        </div>
                    </div>

                    <div class="question-explanation-card">
                        <div class="question-title">üîÑ "Attitude toward change?"</div>
                        <div class="spiritual-basis">
                            <strong>Vedantic Understanding:</strong> Relationship with <em>Maya</em> (impermanence):
                            <ul style="margin-top: 8px; padding-left: 20px; color: #6B7280;">
                                <li><strong>Resist strongly</strong> ‚Üí Infant/Baby Soul: Attachment to form</li>
                                <li><strong>Seek excitement</strong> ‚Üí Young Soul: <em>Rajas</em> (stimulation-seeking)</li>
                                <li><strong>Growth opportunity</strong> ‚Üí Mature Soul: Accepting <em>karma</em> as teacher</li>
                                <li><strong>Catalyze in others</strong> ‚Üí Old Soul: <em>Bodhisattva</em> impulse</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="wisdom-card" style="margin-top: 25px;">
                    <div class="wisdom-header">
                        <span>üöÄ</span>
                        <span>Why Single Answers Create Dramatic Shifts</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        Each question can shift your result by <strong>400 incarnations</strong> because Theosophy teaches that <em>"a single shift in consciousness can represent lifetimes of evolution."</em> Someone might be chronologically a Young Soul (incarnation 350) but demonstrate Old Soul wisdom about materialism, adjusting their functional soul age to 650+.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        <strong>Vedantic Truth:</strong> Your current level of awareness matters more than how many lives you've lived. Consciousness evolution isn't linear - it can accelerate rapidly through conscious choice and spiritual practice.
                    </p>
                </div>

                <div style="background: linear-gradient(135deg, #F59E0B, #D97706); color: white; padding: 20px; border-radius: 15px; text-align: center; margin-top: 20px;">
                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 10px;">
                        üôè Answer with Complete Honesty
                    </div>
                    <div style="opacity: 0.95; line-height: 1.6;">
                        Your authentic responses reveal your soul's current evolutionary state. There are no "right" answers - only honest ones that lead to meaningful insights about your spiritual journey.
                    </div>
                </div>
            </div>

            <!-- Soul Insights Survey -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üßø</span>
                    <h2 class="section-title">Soul Insights Survey</h2>
                </div>
                <p style="color: #6B7280; margin-bottom: 20px;">
                    These questions help refine your soul age calculation by understanding your current life patterns and spiritual inclinations.
                </p>

                <div class="survey-grid">
                    <div class="question-card">
                        <div class="question-text">What drives you most in life?</div>
                        <select id="q1">
                            <option value="">Select one...</option>
                            <option value="survival">Basic survival, security, and material needs</option>
                            <option value="pleasure">Pleasure, excitement, and new experiences</option>
                            <option value="success">Success, achievement, and recognition</option>
                            <option value="relationships">Deep relationships and emotional connections</option>
                            <option value="meaning">Meaning, wisdom, and spiritual growth</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you typically handle conflict?</div>
                        <select id="q2">
                            <option value="">Select one...</option>
                            <option value="avoid">Avoid it at all costs</option>
                            <option value="fight">Fight aggressively to win</option>
                            <option value="compete">Compete strategically</option>
                            <option value="understand">Seek to understand all perspectives</option>
                            <option value="transcend">Find ways to transcend the conflict entirely</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What's your relationship with material possessions?</div>
                        <select id="q3">
                            <option value="">Select one...</option>
                            <option value="essential">They're essential for my sense of security</option>
                            <option value="enjoy">I enjoy them but they're not everything</option>
                            <option value="status">They represent my success and status</option>
                            <option value="tools">They're just tools for deeper purposes</option>
                            <option value="burden">They often feel like a burden</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you learn best?</div>
                        <select id="q4">
                            <option value="">Select one...</option>
                            <option value="repetition">Through repetition and following rules</option>
                            <option value="experience">Through direct, often intense experiences</option>
                            <option value="systems">Through structured systems and methods</option>
                            <option value="reflection">Through deep reflection and inner work</option>
                            <option value="intuition">Through intuition and spiritual insight</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What's your attitude toward change?</div>
                        <select id="q5">
                            <option value="">Select one...</option>
                            <option value="resist">I strongly resist most changes</option>
                            <option value="excitement">I seek change for excitement</option>
                            <option value="opportunity">I see change as opportunity for growth</option>
                            <option value="natural">I accept change as natural and necessary</option>
                            <option value="catalyst">I often catalyze change in others</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Advanced Soul Analysis -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üïâÔ∏è</span>
                    <h2 class="section-title">Advanced Soul Analysis</h2>
                </div>
                <p style="color: #6B7280; margin-bottom: 20px;">
                    These deeper questions, based on classical Vedantic principles and Jaimini astrology, help determine your precise soul age within the 777-incarnation framework.
                </p>

                <div class="survey-grid">
                    <div class="question-card">
                        <div class="question-text">When facing suffering or disappointment, what is your first response?</div>
                        <select id="q6">
                            <option value="">Select one...</option>
                            <option value="blame">Blame others or external circumstances</option>
                            <option value="resist">Fight against it or deny its reality</option>
                            <option value="accept">Accept it but feel victimized by life</option>
                            <option value="lesson">See it as a lesson and opportunity for growth</option>
                            <option value="witness">Observe it with detachment as part of life's play</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you experience your sense of individual identity?</div>
                        <select id="q7">
                            <option value="">Select one...</option>
                            <option value="physical">I am primarily this body and its needs</option>
                            <option value="social">I am defined by my roles, relationships, and reputation</option>
                            <option value="achiever">I am what I accomplish and create in the world</option>
                            <option value="seeker">I am a soul having experiences and learning</option>
                            <option value="awareness">I am awareness itself, temporarily in form</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What is your relationship with rules, traditions, and authority?</div>
                        <select id="q8">
                            <option value="">Select one...</option>
                            <option value="depend">I need clear rules and authority to feel safe</option>
                            <option value="follow">I follow traditions because they provide order and meaning</option>
                            <option value="challenge">I question authority and create my own rules</option>
                            <option value="discern">I honor wisdom while discerning what serves growth</option>
                            <option value="beyond">I see all rules as temporary conveniences</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you experience time and your life's purpose?</div>
                        <select id="q9">
                            <option value="">Select one...</option>
                            <option value="day">I focus mainly on today's immediate needs</option>
                            <option value="linear">Life is a straight path toward specific goals</option>
                            <option value="building">I'm building something lasting for the future</option>
                            <option value="cycles">I see life as cycles of learning and growth</option>
                            <option value="eternal">Time feels illusory; I sense my eternal nature</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">When you act from your highest self, what motivates you?</div>
                        <select id="q10">
                            <option value="">Select one...</option>
                            <option value="safety">Protecting myself and my loved ones</option>
                            <option value="duty">Fulfilling my obligations and doing what's right</option>
                            <option value="achievement">Creating something significant and being recognized</option>
                            <option value="authentic">Being true to my deepest feelings and values</option>
                            <option value="service">Serving the highest good of all beings</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you relate to the concept of God, Divine, or Ultimate Reality?</div>
                        <select id="q11">
                            <option value="">Select one...</option>
                            <option value="fear">As a powerful force to be feared or appeased</option>
                            <option value="separate">As separate from me, to be worshipped or obeyed</option>
                            <option value="partner">As a partner or ally in achieving my goals</option>
                            <option value="love">As unconditional love expressing through relationships</option>
                            <option value="self">As my own deepest Self and the essence of all existence</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What do you consider your greatest source of knowledge or wisdom?</div>
                        <select id="q12">
                            <option value="">Select one...</option>
                            <option value="experience">Direct personal experience and trial-and-error</option>
                            <option value="tradition">Established teachings, scriptures, and cultural wisdom</option>
                            <option value="analysis">Logical thinking, study, and intellectual understanding</option>
                            <option value="insight">Inner reflection, therapy, and psychological awareness</option>
                            <option value="intuition">Direct knowing that arises from silence and presence</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you experience your connection with others and the world?</div>
                        <select id="q13">
                            <option value="">Select one...</option>
                            <option value="separate">We are all separate beings competing for limited resources</option>
                            <option value="tribal">My group/family/nation comes first, others are different</option>
                            <option value="network">We are all connected through our achievements and interactions</option>
                            <option value="heart">We are connected through shared emotions and experiences</option>
                            <option value="unity">We are all expressions of the same underlying consciousness</option>
                        </select>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <button class="calculate-btn" onclick="calculateSoulAge()" disabled>
                    ‚ú® Calculate My Soul Age ‚ú®
                </button>
            </div>
            
            <!-- Results Section -->
            <div id="results" class="results-container">
                <div class="soul-age-display">
                    <div class="confidence-indicator">
                        <span id="confidenceDot" class="confidence-dot"></span>
                        <span id="confidenceText" class="confidence-text"></span>
                    </div>
                    
                    <div class="soul-age-number" id="soulAgeNumber">~</div>
                    <div class="soul-stage" id="soulStage">Calculating...</div>
                    <div class="soul-stage-description" id="soulStageDescription"></div>

                    <div class="incarnation-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="incarnationRange">-</div>
                            <div class="stat-label">Incarnation Range</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="earthYears">-</div>
                            <div class="stat-label">Earth Years</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="spiralLevel">-</div>
                            <div class="stat-label">Evolutionary Spiral</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="remainingLives">-</div>
                            <div class="stat-label">Remaining Lives</div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Stage Description -->
                <div id="stageDescriptionCard" class="stage-description-card">
                    <div class="stage-description-title" id="stageDescriptionTitle"></div>
                    <div class="stage-description-text" id="stageDescriptionText"></div>
                    <div class="stage-traits" id="stageTraits"></div>
                </div>

                <!-- Characteristics Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">üéØ</span>
                        <h2 class="section-title">Your Soul Characteristics</h2>
                    </div>
                    <div id="characteristicsDisplay">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Understanding -->
        <div id="understanding-tab" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üïâÔ∏è</span>
                    <h2 class="section-title">The 777-Incarnation Framework</h2>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üìú</span>
                        <span>What This Calculator Does</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        This calculator determines where you are in your soul's 777-lifetime journey on Earth. Based on ancient spiritual teachings from India (Vedanta) and 19th-century Theosophical wisdom, it calculates your approximate "soul age" - how many lifetimes you've experienced as a human being.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        Think of it like determining what grade you're in at "Earth School." Just as students progress through elementary, middle school, high school, and college, souls progress through different stages of human development across many lifetimes.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üåü</span>
                        <span>The Five Soul Ages Explained Simply</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563; margin-bottom: 20px;">
                        Every human soul progresses through five main stages during their Earth incarnations. Each stage has its own lessons, challenges, and ways of seeing the world:
                    </p>

                    <div class="evolution-stages">
                        <div class="stage-card infant">
                            <div class="stage-number">Stage 1</div>
                            <div class="stage-name">Infant Soul (Lives 1-155)</div>
                            <div class="stage-range">The "Kindergarten" of Human Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Basic human survival, how bodies work, basic social rules.
                                <br><strong>Like:</strong> A child learning to walk and talk - everything is new and overwhelming.
                                <br><strong>Focus:</strong> Safety, following rules, staying alive, simple pleasures.
                                <br><strong>Challenges:</strong> Fear of the unknown, need for security, difficulty with complexity.
                                <br><strong>Common Traits:</strong> Simple lifestyle preferences, traditional values, literal thinking, strong tribal/group loyalties, fear of change, focus on basic needs and comforts.
                            </div>
                        </div>

                        <div class="stage-card baby">
                            <div class="stage-number">Stage 2</div>
                            <div class="stage-name">Baby Soul (Lives 156-310)</div>
                            <div class="stage-range">The "Elementary School" Phase</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Right vs. wrong, group belonging, tradition, authority.
                                <br><strong>Like:</strong> A child who wants clear rules and gets upset when others break them.
                                <br><strong>Focus:</strong> Order, tradition, belonging to groups, moral certainty.
                                <br><strong>Challenges:</strong> Judging others, rigidity, fear of being different.
                                <br><strong>Common Traits:</strong> Strong moral convictions, traditional religious or political beliefs, difficulty accepting different lifestyles, focus on duty and conformity, black-and-white thinking.
                            </div>
                        </div>

                        <div class="stage-card young">
                            <div class="stage-number">Stage 3</div>
                            <div class="stage-name">Young Soul (Lives 311-465)</div>
                            <div class="stage-range">The "High School" Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Personal power, achievement, independence, success.
                                <br><strong>Like:</strong> A teenager wanting to prove themselves and make their mark on the world.
                                <br><strong>Focus:</strong> Success, recognition, building things, competition, material achievement.
                                <br><strong>Challenges:</strong> Ego, workaholism, sacrificing relationships for success.
                                <br><strong>Common Traits:</strong> Highly ambitious, competitive, materialistic, excellent at building careers/businesses, impatient with "inefficiency," often wealthy or power-seeking.
                            </div>
                        </div>

                        <div class="stage-card mature">
                            <div class="stage-number">Stage 4</div>
                            <div class="stage-name">Mature Soul (Lives 466-620)</div>
                            <div class="stage-range">The "College Years" of Soul Development</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Emotional depth, authentic relationships, inner truth, psychology.
                                <br><strong>Like:</strong> A college student questioning everything they were taught and seeking deeper meaning.
                                <br><strong>Focus:</strong> Relationships, emotions, authenticity, personal growth, therapy.
                                <br><strong>Challenges:</strong> Emotional intensity, relationship drama, existential angst.
                                <br><strong>Common Traits:</strong> Emotionally intense, drawn to therapy/psychology, questions authority, values authenticity over success, relationship-focused, often in helping professions.
                            </div>
                        </div>

                        <div class="stage-card old">
                            <div class="stage-number">Stage 5</div>
                            <div class="stage-name">Old Soul (Lives 621-777)</div>
                            <div class="stage-range">The "Graduate School" of Human Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Wisdom, detachment, service, spiritual truth, universal love.
                                <br><strong>Like:</strong> A wise professor who's "been there, done that" and now wants to help others.
                                <br><strong>Focus:</strong> Wisdom, teaching, service, spirituality, simplicity, peace.
                                <br><strong>Challenges:</strong> Feeling disconnected from materialism, difficulty fitting into society.
                                <br><strong>Common Traits:</strong> Spiritually oriented, comfortable with solitude, often in teaching/healing roles, simple lifestyle, wise beyond their years, sometimes feel like they don't belong.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üîÑ</span>
                        <span>Why 777 Lives?</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        The number 777 comes from ancient spiritual mathematics. In many traditions, 7 represents completion and perfection. The triple 7 (777) represents the complete journey of human soul evolution. It's calculated as 7 major cycles √ó 111 incarnations each = 777 total human lives needed to learn everything Earth has to teach us.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>‚öñÔ∏è</span>
                        <span>Important Disclaimers</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        <strong>This is for Entertainment & Self-Reflection:</strong> This calculator is based on spiritual theories, not scientific facts. Use it as a tool for self-understanding and personal growth, not as absolute truth about your soul or destiny.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        <strong>Every Soul is Unique:</strong> Even souls at the same "age" can be very different. Your individual life experiences, choices, and karma create your unique path.
                    </p>
                </div>
            </div>
        </div>

        <!-- Tab 3: Jaimini Analysis -->
        <div id="jaimini-tab" class="tab-content">
            <!-- Introduction Section -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üîÆ</span>
                    <h2 class="section-title">Jaimini (Jamakkol) Astrological Analysis</h2>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üìú</span>
                        <span>What is Jaimini/Jamakkol Astrology? (For Complete Beginners)</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563; margin-bottom: 15px;">
                        <strong>Jaimini astrology</strong> (also called <strong>Jamakkol</strong> in some traditions) is like having a spiritual GPS for your soul's journey. Imagine you're on a road trip, but instead of going from city to city, your soul is traveling from lifetime to lifetime, learning different lessons along the way.
                    </p>
                    <p style="line-height: 1.8; color: #4B5563; margin-bottom: 15px;">
                        <strong>Regular astrology</strong> might tell you "You'll be good with money" or "You'll face challenges in relationships." <strong>Jaimini astrology</strong> asks deeper questions like "Why did your soul choose to learn about money in this lifetime?" or "What spiritual growth comes from your relationship challenges?"
                    </p>
                    <p style="line-height: 1.8; color: #4B5563;">
                        Think of it this way: If regular astrology looks at the weather on the surface of a lake, Jaimini astrology dives deep to understand the currents, the fish, and the entire ecosystem beneath the water.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üîç</span>
                        <span>Why Jaimini is Different from Other Astrology</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4 style="color: var(--error); font-weight: 700; margin-bottom: 10px;">Regular Astrology Asks:</h4>
                            <ul style="color: #6B7280; line-height: 1.6; padding-left: 20px;">
                                <li>Will I be successful?</li>
                                <li>When will I get married?</li>
                                <li>What career is best for me?</li>
                                <li>Will I have money problems?</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: var(--success); font-weight: 700; margin-bottom: 10px;">Jaimini Astrology Asks:</h4>
                            <ul style="color: #6B7280; line-height: 1.6; padding-left: 20px;">
                                <li>Why did my soul choose this path?</li>
                                <li>What am I meant to learn from relationships?</li>
                                <li>How does my work serve my spiritual growth?</li>
                                <li>What karmic patterns am I healing?</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üéØ</span>
                        <span>Key Jaimini Terms Explained Simply</span>
                    </div>
                    <div style="display: grid; gap: 15px; margin-top: 15px;">
                        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; border-left: 4px solid var(--sacred-gold);">
                            <h4 style="color: var(--sacred-gold); font-weight: 700; margin-bottom: 8px;">Atmakaraka - "Your Soul's Main Teacher"</h4>
                            <p style="color: #6B7280; line-height: 1.6;">This is the planet that represents your soul's primary lesson in this lifetime. Think of it as your soul's "major" in the university of life. If your Atmakaraka is Mars, your soul came to learn courage. If it's Venus, you're learning about love and beauty.</p>
                        </div>
                        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; border-left: 4px solid var(--secondary);">
                            <h4 style="color: var(--secondary); font-weight: 700; margin-bottom: 8px;">Arudha Lagna - "Your Soul's Disguise"</h4>
                            <p style="color: #6B7280; line-height: 1.6;">This shows how others see you versus who you really are inside. It's like the difference between your Facebook profile and your private diary. The bigger the difference, the more your soul is working on authenticity.</p>
                        </div>
                        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; border-left: 4px solid var(--primary);">
                            <h4 style="color: var(--primary); font-weight: 700; margin-bottom: 8px;">Karmic Theme - "Your Life's Main Subject"</h4>
                            <p style="color: #6B7280; line-height: 1.6;">This is the overarching theme of what your soul is studying in this lifetime. Like choosing between studying science, art, business, or spirituality - but for your soul's evolution.</p>
                        </div>
                        <div style="background: #F9FAFB; padding: 15px; border-radius: 10px; border-left: 4px solid var(--success);">
                            <h4 style="color: var(--success); font-weight: 700; margin-bottom: 8px;">Soul Lesson - "Your Graduation Requirement"</h4>
                            <p style="color: #6B7280; line-height: 1.6;">This is the specific skill or wisdom your soul needs to master before it can "graduate" to the next level. Think of it as your spiritual thesis project.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Jaimini Birth Information Form -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üìÖ</span>
                    <h2 class="section-title">Birth Information for Jaimini Analysis</h2>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Date *</label>
                    <input type="date" id="jaiminiBirthDate" class="input-field" onchange="validateJaiminiDate()" required>
                    <span id="jaiminiDateValidation" class="validation-icon">‚úì</span>
                    <div id="jaiminiDateError" class="error-message"></div>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Time (Required for accurate Jaimini analysis)</label>
                    <div class="time-grid">
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">Hour</label>
                            <select id="jaiminiBirthHour" class="input-field" onchange="validateJaiminiTime()">
                                <option value="">Hour</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">Minute</label>
                            <input type="number" id="jaiminiBirthMinute" class="input-field" 
                                   placeholder="Min" 
                                   min="0" 
                                   max="59" 
                                   onchange="validateJaiminiTime()"
                                   oninput="validateJaiminiTime()">
                        </div>
                        <div>
                            <label style="font-size: 0.9rem; color: #6B7280;">AM/PM</label>
                            <select id="jaiminiAmpm" class="input-field" onchange="validateJaiminiTime()">
                                <option value="">AM/PM</option>
                                <option value="AM">AM</option>
                                <option value="PM">PM</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="unknown-time-btn" onclick="useJaiminiUnknownTime()">
                        Don't Know Time - Use Noon
                    </button>
                    <span id="jaiminiTimeValidation" class="validation-icon">‚úì</span>
                    <div id="jaiminiTimeError" class="error-message"></div>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Location *</label>
                    <div class="location-input-container">
                        <input type="text" 
                               id="jaiminiBirthLocation" 
                               class="input-field" 
                               placeholder="e.g., New York, London, Mumbai..."
                               onchange="validateJaiminiLocation()"
                               oninput="searchJaiminiLocation()"
                               autocomplete="off"
                               required>
                        <div id="jaiminiLocationAutocomplete" class="autocomplete-dropdown"></div>
                    </div>
                    <span id="jaiminiLocationValidation" class="validation-icon">‚úì</span>
                    <div id="jaiminiLocationError" class="error-message"></div>
                </div>

                <div style="text-align: center; margin: 30px 0;">
                    <button class="calculate-btn" onclick="calculateJaiminiChart()" disabled style="background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%);">
                        üîÆ Calculate My Jaimini Chart üîÆ
                    </button>
                </div>
            </div>

            <!-- Jaimini Chart Results Section -->
            <div id="jaimini-results" class="results-container">
                <div class="soul-age-display" style="background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%);">
                    <div class="soul-age-number" style="font-size: 2.5rem;">üîÆ Your Jaimini Chart</div>
                    <div class="soul-stage" id="jaiminiTitle">Your Karmic Blueprint</div>
                    <div class="soul-stage-description" id="jaiminiDescription"></div>

                    <div class="incarnation-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="atmakaraka">-</div>
                            <div class="stat-label">Atmakaraka Planet</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="arudhaLagna">-</div>
                            <div class="stat-label">Arudha Lagna</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="karmicTheme">-</div>
                            <div class="stat-label">Karmic Theme</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="soulLesson">-</div>
                            <div class="stat-label">Primary Soul Lesson</div>
                        </div>
                    </div>
                </div>

                <!-- Jaimini Analysis Cards -->
                <div id="jaiminiAnalysis" class="section">
                    <div class="section-header">
                        <span class="section-icon">‚≠ê</span>
                        <h2 class="section-title">Your Jaimini Analysis</h2>
                    </div>
                    <div id="jaiminiCards">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Personalized Spiritual Guidance Section -->
                <div id="spiritualGuidance" class="section">
                    <div class="section-header">
                        <span class="section-icon">üôè</span>
                        <h2 class="section-title">Your Personalized Spiritual Guidance</h2>
                    </div>
                    
                    <!-- General Spiritual Guidance -->
                    <div id="generalGuidance" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üåü</span>
                            <span>Universal Spiritual Practices for Your Path</span>
                        </div>
                        <div id="generalGuidanceContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Hindu/Vedantic Guidance -->
                    <div id="vedicGuidance" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üïâÔ∏è</span>
                            <span>Vedantic & Hindu Practices for Your Atmakaraka</span>
                        </div>
                        <div id="vedicGuidanceContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Daily & Weekly Practices -->
                    <div id="dailyPractices" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üìÖ</span>
                            <span>Daily & Weekly Spiritual Practices</span>
                        </div>
                        <div id="dailyPracticesContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Life Path & Karmic Guidance -->
                    <div id="karmicGuidance" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üõ§Ô∏è</span>
                            <span>Life Path & Karmic Lessons</span>
                        </div>
                        <div id="karmicGuidanceContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Meditation & Mindfulness -->
                    <div id="meditationGuidance" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üßò</span>
                            <span>Personalized Meditation & Mindfulness</span>
                        </div>
                        <div id="meditationGuidanceContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Relationships & Career Guidance -->
                    <div id="lifeGuidance" class="wisdom-card">
                        <div class="wisdom-header">
                            <span>üíº</span>
                            <span>Spiritual Approach to Relationships & Career</span>
                        </div>
                        <div id="lifeGuidanceContent">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 4: FAQ -->
        <div id="faq-tab" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">‚ùì</span>
                    <h2 class="section-title">Frequently Asked Questions</h2>
                </div>
                <p style="color: #6B7280; margin-bottom: 30px;">
                    Here are the most common questions people ask about soul age and this calculator. Click any question to see the answer.
                </p>

                <div class="faq-section">
                    <!-- Basic Concepts -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üåü</span>
                            Basic Concepts
                        </h3>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What exactly is a "soul age"?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Soul age refers to how many lifetimes your soul has experienced as a human being on Earth. It's like asking "what grade are you in?" at the school of human experience. A newer soul might be in "kindergarten" while an older soul might be in "graduate school."
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Do I really have a soul, and does it actually reincarnate?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator is based on spiritual beliefs about reincarnation, not scientific facts. Many religions and spiritual traditions believe in souls and multiple lifetimes, while others don't. Use this as a tool for self-reflection rather than absolute truth. What matters is whether the insights help you understand yourself better.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Why 777 lives specifically? Where does this number come from?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The number 777 comes from ancient spiritual mathematics found in Hindu and Theosophical teachings. It represents 7 major evolutionary cycles √ó 111 incarnations each. Seven is considered a number of completion in many traditions, so triple 7 represents the complete human journey.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is being an "older soul" better than being a "younger soul"?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No! Each soul age has its own gifts and purposes. Young souls bring energy, ambition, and drive to build the world. Mature souls bring emotional depth and healing. Old souls bring wisdom and spiritual insight. We need all ages working together. It's not about being "better" - it's about being at different stages of learning.
                            </div>
                        </div>
                    </div>

                    <!-- How the Calculator Works -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üßÆ</span>
                            How the Calculator Works
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How does this calculator actually determine my soul age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The calculator uses your birth information to create an astrological chart, then applies Jaimini astrology principles to analyze your soul patterns. It combines this with your survey responses about your life approach and values. It's like a spiritual algorithm that looks at multiple factors to estimate where you are in your soul's journey.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What if I don't know my exact birth time?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                That's totally fine! The calculator automatically uses noon (12:00 PM) as a default if you don't provide a time or click "Don't Know Time - Use Noon." While the exact time can add precision, the date and location are more important for determining soul age. Many people don't know their exact birth time, and the calculator still provides valuable insights.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How accurate is this calculator?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The calculator provides estimates based on spiritual theories, not scientific measurements. Think of it like a personality test - it can offer insights and food for thought, but it's not a precise scientific instrument. Use the results as a starting point for self-reflection rather than absolute truth.
                            </div>
                        </div>
                    </div>

                    <!-- Understanding Your Results -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üìä</span>
                            Understanding Your Results
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                My result doesn't feel right to me. What does that mean?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Trust your intuition! This calculator provides estimates based on limited information. You might be transitioning between soul ages, have unusual karmic patterns, or the system might not capture your unique situation. Use the result as one perspective among many, not as the final word on who you are.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What does "confidence level" mean in my results?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The confidence level shows how certain the calculator is about your result based on how clear your chart patterns are. High confidence means your chart shows strong, consistent patterns. Lower confidence might mean you're between soul ages or have complex patterns that are harder to categorize.
                            </div>
                        </div>
                    </div>

                    <!-- Technical & Spiritual -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üîÆ</span>
                            Technical & Spiritual Questions
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is this calculator storing my personal information?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No, this calculator doesn't store any of your personal information. Everything is calculated in your browser and nothing is saved to any database. Your privacy is completely protected. This is clearly stated as "No Data Stored" in our privacy notice.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What spiritual traditions is this based on?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator combines concepts from Hindu Vedanta (especially the concept of Samsara - the cycle of birth and death), 19th-century Theosophy (Helena Blavatsky's teachings about soul evolution), and Jaimini astrology (an ancient Vedic astrological system). It synthesizes these traditions into a practical framework for understanding soul development.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Does this conflict with my religious beliefs?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator is based on Eastern spiritual concepts that may or may not align with your religious beliefs. Many religions have different views on souls, afterlife, and reincarnation. Use this tool only if it feels helpful and doesn't conflict with your personal faith. It's meant for self-reflection, not to challenge your religious beliefs.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentLocationData = null;
        let currentJaiminiLocationData = null;
        let searchTimeout = null;
        let jaiminiSearchTimeout = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            validateForm();
            validateJaiminiForm();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Calculator tab validation
            document.getElementById('birthDate').addEventListener('change', validateForm);
            
            ['birthHour', 'birthMinute', 'ampm'].forEach(id => {
                const el = document.getElementById(id);
                el.addEventListener('change', () => {
                    validateTime();
                    validateForm();
                });
            });
            
            document.getElementById('birthLocation').addEventListener('input', () => {
                validateLocation();
                validateForm();
            });

            // Survey validation
            ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q12', 'q13'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', validateForm);
                }
            });

            // Jaimini tab validation
            document.getElementById('jaiminiBirthDate').addEventListener('change', validateJaiminiForm);
            
            ['jaiminiBirthHour', 'jaiminiBirthMinute', 'jaiminiAmpm'].forEach(id => {
                const el = document.getElementById(id);
                el.addEventListener('change', () => {
                    validateJaiminiTime();
                    validateJaiminiForm();
                });
            });
            
            document.getElementById('jaiminiBirthLocation').addEventListener('input', () => {
                validateJaiminiLocation();
                validateJaiminiForm();
            });
        }

        // Tab switching
        function switchTab(tabId, buttonEl) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab and activate button
            document.getElementById(tabId).classList.add('active');
            buttonEl.classList.add('active');
        }

        // Calculator Tab Validation Functions
        function validateDate() {
            const input = document.getElementById('birthDate');
            const date = new Date(input.value);
            const now = new Date();
            const minDate = new Date(now.getFullYear() - 150, 0, 1);
            
            if (!input.value) {
                showError('dateError', 'Birth date is required');
                showValidation('dateValidation', false);
                return false;
            }
            
            if (date > now) {
                showError('dateError', 'Birth date cannot be in the future');
                showValidation('dateValidation', false);
                return false;
            }
            
            if (date < minDate) {
                showError('dateError', 'Birth date seems too far in the past');
                showValidation('dateValidation', false);
                return false;
            }
            
            hideError('dateError');
            showValidation('dateValidation', true);
            return true;
        }

        function validateTime() {
            const hour = document.getElementById('birthHour').value;
            const minute = document.getElementById('birthMinute').value || '0';
            const ampm = document.getElementById('ampm').value;
            
            // Time is completely optional - if hour and AM/PM are both empty, that's okay
            if (!hour && !ampm) {
                showValidation('timeValidation', true);
                hideError('timeError');
                return true;
            }
            
            // If hour is filled, AM/PM must also be filled
            if (hour && !ampm) {
                showError('timeError', 'Please select AM or PM, or click "Don\'t Know Time"');
                showValidation('timeValidation', false);
                return false;
            }
            
            // If AM/PM is filled, hour must also be filled
            if (!hour && ampm) {
                showError('timeError', 'Please select an hour, or click "Don\'t Know Time"');
                showValidation('timeValidation', false);
                return false;
            }
            
            // If both hour and AM/PM are filled, validate the values
            if (hour && ampm) {
                const hourNum = parseInt(hour);
                const minuteNum = parseInt(minute);
                
                if (hourNum < 1 || hourNum > 12) {
                    showError('timeError', 'Hour must be between 1 and 12');
                    showValidation('timeValidation', false);
                    return false;
                }
                
                if (minuteNum < 0 || minuteNum > 59) {
                    showError('timeError', 'Minutes must be between 0 and 59');
                    showValidation('timeValidation', false);
                    return false;
                }
            }
            
            hideError('timeError');
            showValidation('timeValidation', true);
            return true;
        }

        function validateLocation() {
            const input = document.getElementById('birthLocation');
            
            if (!input.value.trim()) {
                showError('locationError', 'Birth location is required');
                showValidation('locationValidation', false);
                return false;
            }
            
            if (!currentLocationData) {
                showError('locationError', 'Please select a location from the dropdown');
                showValidation('locationValidation', false);
                return false;
            }
            
            hideError('locationError');
            showValidation('locationValidation', true);
            return true;
        }

        function validateForm() {
            const dateValid = validateDate();
            const timeValid = validateTime();
            const locationValid = validateLocation();
            
            // Check survey questions - all 13 questions
            const surveyValid = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q12', 'q13'].every(id => {
                const element = document.getElementById(id);
                return element && element.value !== '';
            });
            
            const allValid = dateValid && timeValid && locationValid && surveyValid;
            
            // Enable/disable calculate button
            const calculateBtn = document.querySelector('button[onclick="calculateSoulAge()"]');
            if (calculateBtn) calculateBtn.disabled = !allValid;
            
            return allValid;
        }

        // Jaimini Tab Validation Functions
        function validateJaiminiDate() {
            const input = document.getElementById('jaiminiBirthDate');
            const date = new Date(input.value);
            const now = new Date();
            const minDate = new Date(now.getFullYear() - 150, 0, 1);
            
            if (!input.value) {
                showError('jaiminiDateError', 'Birth date is required');
                showValidation('jaiminiDateValidation', false);
                return false;
            }
            
            if (date > now) {
                showError('jaiminiDateError', 'Birth date cannot be in the future');
                showValidation('jaiminiDateValidation', false);
                return false;
            }
            
            if (date < minDate) {
                showError('jaiminiDateError', 'Birth date seems too far in the past');
                showValidation('jaiminiDateValidation', false);
                return false;
            }
            
            hideError('jaiminiDateError');
            showValidation('jaiminiDateValidation', true);
            return true;
        }

        function validateJaiminiTime() {
            const hour = document.getElementById('jaiminiBirthHour').value;
            const minute = document.getElementById('jaiminiBirthMinute').value || '0';
            const ampm = document.getElementById('jaiminiAmpm').value;
            
            // Time is optional for Jaimini too
            if (!hour && !ampm) {
                showValidation('jaiminiTimeValidation', true);
                hideError('jaiminiTimeError');
                return true;
            }
            
            if (hour && !ampm) {
                showError('jaiminiTimeError', 'Please select AM or PM, or click "Don\'t Know Time"');
                showValidation('jaiminiTimeValidation', false);
                return false;
            }
            
            if (!hour && ampm) {
                showError('jaiminiTimeError', 'Please select an hour, or click "Don\'t Know Time"');
                showValidation('jaiminiTimeValidation', false);
                return false;
            }
            
            if (hour && ampm) {
                const hourNum = parseInt(hour);
                const minuteNum = parseInt(minute);
                
                if (hourNum < 1 || hourNum > 12) {
                    showError('jaiminiTimeError', 'Hour must be between 1 and 12');
                    showValidation('jaiminiTimeValidation', false);
                    return false;
                }
                
                if (minuteNum < 0 || minuteNum > 59) {
                    showError('jaiminiTimeError', 'Minutes must be between 0 and 59');
                    showValidation('jaiminiTimeValidation', false);
                    return false;
                }
            }
            
            hideError('jaiminiTimeError');
            showValidation('jaiminiTimeValidation', true);
            return true;
        }

        function validateJaiminiLocation() {
            const input = document.getElementById('jaiminiBirthLocation');
            
            if (!input.value.trim()) {
                showError('jaiminiLocationError', 'Birth location is required');
                showValidation('jaiminiLocationValidation', false);
                return false;
            }
            
            if (!currentJaiminiLocationData) {
                showError('jaiminiLocationError', 'Please select a location from the dropdown');
                showValidation('jaiminiLocationValidation', false);
                return false;
            }
            
            hideError('jaiminiLocationError');
            showValidation('jaiminiLocationValidation', true);
            return true;
        }

        function validateJaiminiForm() {
            const dateValid = validateJaiminiDate();
            const timeValid = validateJaiminiTime();
            const locationValid = validateJaiminiLocation();
            
            const allValid = dateValid && timeValid && locationValid;
            
            // Enable/disable Jaimini calculate button
            const jaiminiBtn = document.querySelector('button[onclick="calculateJaiminiChart()"]');
            if (jaiminiBtn) jaiminiBtn.disabled = !allValid;
            
            return allValid;
        }

        // Utility functions
        function showError(errorId, message) {
            const errorEl = document.getElementById(errorId);
            errorEl.textContent = message;
            errorEl.classList.add('show');
        }

        function hideError(errorId) {
            const errorEl = document.getElementById(errorId);
            errorEl.classList.remove('show');
        }

        function showValidation(validationId, isValid) {
            const validationEl = document.getElementById(validationId);
            validationEl.className = `validation-icon ${isValid ? 'valid' : 'invalid'}`;
            validationEl.textContent = isValid ? '‚úì' : '‚úó';
        }

        // Location search functionality for Calculator tab
        function searchLocation() {
            const query = document.getElementById('birthLocation').value;
            
            if (query.length < 3) {
                hideLocationDropdown();
                return;
            }
            
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            
            searchTimeout = setTimeout(() => {
                performLocationSearch(query);
            }, 300);
        }

        async function performLocationSearch(query) {
            const dropdown = document.getElementById('locationAutocomplete');
            
            try {
                showLocationStatus('Searching...');
                
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&limit=5&q=${encodeURIComponent(query)}`
                );
                
                const locations = await response.json();
                
                if (locations.length === 0) {
                    showLocationStatus('No locations found');
                    return;
                }
                
                displayLocationResults(locations);
                
            } catch (error) {
                console.error('Location search error:', error);
                showLocationStatus('Search unavailable');
            }
        }

        function displayLocationResults(locations) {
            const dropdown = document.getElementById('locationAutocomplete');
            
            dropdown.innerHTML = locations.map(location => `
                <div class="autocomplete-item" onclick="selectLocation('${location.display_name.replace(/'/g, "&#39;")}', ${location.lat}, ${location.lon})">
                    <div class="location-name">${location.display_name.split(',')[0]}</div>
                    <div class="location-details">${location.display_name}</div>
                </div>
            `).join('');
            
            dropdown.style.display = 'block';
        }

        function selectLocation(name, lat, lon) {
            document.getElementById('birthLocation').value = name;
            currentLocationData = { name, lat, lon };
            hideLocationDropdown();
            validateLocation();
            validateForm();
        }

        function showLocationStatus(message) {
            const dropdown = document.getElementById('locationAutocomplete');
            dropdown.innerHTML = `<div class="search-status loading">${message}</div>`;
            dropdown.style.display = 'block';
        }

        function hideLocationDropdown() {
            document.getElementById('locationAutocomplete').style.display = 'none';
        }

        // Location search functionality for Jaimini tab
        function searchJaiminiLocation() {
            const query = document.getElementById('jaiminiBirthLocation').value;
            
            if (query.length < 3) {
                hideJaiminiLocationDropdown();
                return;
            }
            
            if (jaiminiSearchTimeout) {
                clearTimeout(jaiminiSearchTimeout);
            }
            
            jaiminiSearchTimeout = setTimeout(() => {
                performJaiminiLocationSearch(query);
            }, 300);
        }

        async function performJaiminiLocationSearch(query) {
            const dropdown = document.getElementById('jaiminiLocationAutocomplete');
            
            try {
                showJaiminiLocationStatus('Searching...');
                
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&limit=5&q=${encodeURIComponent(query)}`
                );
                
                const locations = await response.json();
                
                if (locations.length === 0) {
                    showJaiminiLocationStatus('No locations found');
                    return;
                }
                
                displayJaiminiLocationResults(locations);
                
            } catch (error) {
                console.error('Jaimini location search error:', error);
                showJaiminiLocationStatus('Search unavailable');
            }
        }

        function displayJaiminiLocationResults(locations) {
            const dropdown = document.getElementById('jaiminiLocationAutocomplete');
            
            dropdown.innerHTML = locations.map(location => `
                <div class="autocomplete-item" onclick="selectJaiminiLocation('${location.display_name.replace(/'/g, "&#39;")}', ${location.lat}, ${location.lon})">
                    <div class="location-name">${location.display_name.split(',')[0]}</div>
                    <div class="location-details">${location.display_name}</div>
                </div>
            `).join('');
            
            dropdown.style.display = 'block';
        }

        function selectJaiminiLocation(name, lat, lon) {
            document.getElementById('jaiminiBirthLocation').value = name;
            currentJaiminiLocationData = { name, lat, lon };
            hideJaiminiLocationDropdown();
            validateJaiminiLocation();
            validateJaiminiForm();
        }

        function showJaiminiLocationStatus(message) {
            const dropdown = document.getElementById('jaiminiLocationAutocomplete');
            dropdown.innerHTML = `<div class="search-status loading">${message}</div>`;
            dropdown.style.display = 'block';
        }

        function hideJaiminiLocationDropdown() {
            document.getElementById('jaiminiLocationAutocomplete').style.display = 'none';
        }

        // Unknown time functionality
        function useUnknownTime() {
            document.getElementById('birthHour').value = '12';
            document.getElementById('birthMinute').value = '0';
            document.getElementById('ampm').value = 'PM';
            validateTime();
            validateForm();
        }

        function useJaiminiUnknownTime() {
            document.getElementById('jaiminiBirthHour').value = '12';
            document.getElementById('jaiminiBirthMinute').value = '0';
            document.getElementById('jaiminiAmpm').value = 'PM';
            validateJaiminiTime();
            validateJaiminiForm();
        }

        // Soul Age Calculation - Enhanced with Jaimini Integration
        async function calculateSoulAge() {
            const button = document.querySelector('button[onclick="calculateSoulAge()"]');
            button.disabled = true;
            button.textContent = 'üîÆ Calculating Your Soul Age...';
            
            // Simulate calculation time
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            try {
                const results = performSoulAgeCalculation();
                displayResults(results);
                
                // Scroll to results
                document.getElementById('results').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                
            } catch (error) {
                console.error('Calculation error:', error);
                alert('Sorry, there was an error calculating your soul age. Please try again.');
            } finally {
                button.disabled = false;
                button.textContent = '‚ú® Calculate My Soul Age ‚ú®';
            }
        }

        function performSoulAgeCalculation() {
            // Get form data
            const birthDate = new Date(document.getElementById('birthDate').value);
            const birthHour = document.getElementById('birthHour').value || '12';
            const birthMinute = document.getElementById('birthMinute').value || '0';
            const ampm = document.getElementById('ampm').value || 'PM';
            
            // Convert to 24-hour time (defaulting to noon if not specified)
            let hour24 = parseInt(birthHour);
            if (ampm === 'PM' && hour24 !== 12) hour24 += 12;
            if (ampm === 'AM' && hour24 === 12) hour24 = 0;
            
            const birthTime = new Date(birthDate.getFullYear(), birthDate.getMonth(), birthDate.getDate(), hour24, parseInt(birthMinute));
            
            // Calculate astrological factors
            const astroFactors = calculateAstrologicalFactors(birthTime, currentLocationData);
            
            // FIRST: Generate Jaimini chart analysis to refine astrological factors
            const jaiminiFactors = calculateJaiminiRefinements(astroFactors, birthTime);
            
            // Combine base astrological factors with Jaimini refinements
            const refinedAstroFactors = {
                ...astroFactors,
                jaiminiRefinement: jaiminiFactors.soulAgeModifier,
                spiritualMaturity: jaiminiFactors.spiritualMaturity,
                karmicPattern: jaiminiFactors.karmicPattern
            };
            
            // Get survey responses
            const surveyResponses = getSurveyResponses();
            
            // Calculate soul age with refined factors
            const soulAge = calculateBaseSoulAge(refinedAstroFactors, surveyResponses);
            
            // Determine stage and characteristics
            const stage = determineSoulStage(soulAge);
            const characteristics = getSoulCharacteristics(stage, soulAge);
            
            return {
                soulAge: Math.round(soulAge),
                stage: stage.name,
                stageDescription: stage.description,
                range: stage.range,
                earthYears: soulAge * 65, // Average human lifespan
                spiralLevel: Math.ceil(soulAge / 111),
                remainingLives: Math.max(0, 777 - Math.round(soulAge)),
                confidence: calculateConfidence(refinedAstroFactors, surveyResponses),
                characteristics: characteristics,
                jaiminiInsights: jaiminiFactors // Include Jaimini insights for display
            };
        }

        function calculateJaiminiRefinements(astroFactors, birthTime) {
            // Enhanced Jaimini calculations for more accurate soul age determination
            const year = birthTime.getFullYear();
            const month = birthTime.getMonth() + 1;
            const day = birthTime.getDate();
            const hour = birthTime.getHours();
            const minute = birthTime.getMinutes();
            
            // Calculate Chara Karakas (Character Significators) more precisely
            const planets = ['Sun', 'Moon', 'Mars', 'Mercury', 'Jupiter', 'Venus', 'Saturn'];
            const planetDegrees = planets.map((_, i) => {
                return ((astroFactors.dayOfYear + i * 51.43) % 360); // More sophisticated planet positioning
            });
            
            // Atmakaraka (Soul Significator) - highest degree planet
            const atmakIndex = planetDegrees.indexOf(Math.max(...planetDegrees));
            const atmakaraka = planets[atmakIndex];
            
            // Amatya Karaka (Minister) - second highest degree
            const sortedDegrees = [...planetDegrees].sort((a, b) => b - a);
            const amatyaIndex = planetDegrees.indexOf(sortedDegrees[1]);
            const amatyaKaraka = planets[amatyaIndex];
            
            // Calculate Arudha Padas (Illusory appearances)
            const ascendant = (astroFactors.dayOfYear + (hour * 15)) % 360;
            const arudhaLagna = (ascendant * 2) % 360; // Simplified AL calculation
            
            // Determine spiritual maturity based on Atmakaraka
            const spiritualMaturityMap = {
                'Sun': 40,    // Leadership lessons - mid-mature
                'Moon': 60,   // Emotional lessons - late mature  
                'Mars': 20,   // Power lessons - young soul
                'Mercury': 35, // Communication lessons - early mature
                'Jupiter': 80, // Wisdom lessons - old soul
                'Venus': 45,  // Love/relationship lessons - mid-mature
                'Saturn': 90  // Service/discipline lessons - old soul
            };
            
            const spiritualMaturity = spiritualMaturityMap[atmakaraka] || 50;
            
            // Karmic pattern based on Amatya Karaka
            const karmicPatterns = {
                'Sun': 'leadership',
                'Moon': 'nurturing',
                'Mars': 'action',
                'Mercury': 'communication',
                'Jupiter': 'teaching',
                'Venus': 'harmony',
                'Saturn': 'service'
            };
            
            const karmicPattern = karmicPatterns[amatyaKaraka] || 'general';
            
            // Soul age modifier based on combined factors
            let soulAgeModifier = 0;
            
            // Atmakaraka influence
            if (atmakaraka === 'Jupiter' || atmakaraka === 'Saturn') {
                soulAgeModifier += 150; // Old soul indicators
            } else if (atmakaraka === 'Venus' || atmakaraka === 'Moon') {
                soulAgeModifier += 75;  // Mature soul indicators
            } else if (atmakaraka === 'Sun' || atmakaraka === 'Mercury') {
                soulAgeModifier += 25;  // Young-mature transition
            } else if (atmakaraka === 'Mars') {
                soulAgeModifier -= 50;  // Young soul indicator
            }
            
            // Arudha Lagna influence (how others see you vs. true self)
            const arudhaHouse = Math.floor(arudhaLagna / 30) + 1;
            if (arudhaHouse >= 9) { // 9th, 10th, 11th, 12th houses - dharmic houses
                soulAgeModifier += 50;
            } else if (arudhaHouse <= 4) { // 1st-4th houses - material concerns
                soulAgeModifier -= 25;
            }
            
            // Time-based spiritual influence
            if (hour >= 3 && hour <= 6) { // Brahma Muhurta - spiritual time
                soulAgeModifier += 25;
            } else if (hour >= 18 && hour <= 21) { // Evening spiritual time
                soulAgeModifier += 10;
            }
            
            return {
                atmakaraka,
                amatyaKaraka,
                spiritualMaturity,
                karmicPattern,
                soulAgeModifier,
                arudhaHouse,
                jaiminiSummary: `Your Atmakaraka is ${atmakaraka}, indicating your soul's primary lesson is ${karmicPattern}. Your spiritual maturity resonates at level ${spiritualMaturity}.`
            };
        }

        function calculateAstrologicalFactors(birthTime, location) {
            // Simplified astrological calculation based on birth date and time
            const dayOfYear = Math.floor((birthTime - new Date(birthTime.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const hourOfDay = birthTime.getHours() + birthTime.getMinutes() / 60;
            
            // Mock Jaimini calculations
            const atmakaraka = (dayOfYear * 7 + hourOfDay) % 9; // 0-8 representing planets
            const arudhaLagna = (dayOfYear + hourOfDay * 15) % 12; // 0-11 representing houses
            const charaKarakas = Array.from({length: 7}, (_, i) => (atmakaraka + i) % 9);
            
            return {
                atmakaraka,
                arudhaLagna,
                charaKarakas,
                dayOfYear,
                hourOfDay
            };
        }

        function getSurveyResponses() {
            const responses = {};
            ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q11', 'q12', 'q13'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    responses[id] = element.value;
                }
            });
            return responses;
        }

        function calculateBaseSoulAge(astroFactors, surveyResponses) {
            // Base calculation from astrological factors
            let baseAge = astroFactors.dayOfYear + (astroFactors.hourOfDay * 10);
            baseAge += (astroFactors.atmakaraka * 50);
            baseAge += (astroFactors.arudhaLagna * 30);
            
            // Add Jaimini refinements if available
            if (astroFactors.jaiminiRefinement !== undefined) {
                baseAge += astroFactors.jaiminiRefinement;
            }
            
            // Spiritual maturity influence
            if (astroFactors.spiritualMaturity !== undefined) {
                baseAge += (astroFactors.spiritualMaturity * 3); // Scale the spiritual maturity impact
            }
            
            // Adjust based on survey responses
            const surveyAdjustment = calculateSurveyAdjustment(surveyResponses);
            baseAge += surveyAdjustment;
            
            // Improved normalization - ensure we get a meaningful distribution across 1-777
            let normalizedAge;
            if (baseAge <= 0) {
                normalizedAge = Math.abs(baseAge % 777) + 1;
            } else if (baseAge > 777) {
                // Use a more sophisticated wrapping that preserves the relative position
                normalizedAge = ((baseAge - 1) % 777) + 1;
            } else {
                normalizedAge = baseAge;
            }
            
            return Math.min(777, Math.max(1, Math.round(normalizedAge)));
        }

        function calculateSurveyAdjustment(responses) {
            let adjustment = 0;
            
            // Basic 5 questions (original)
            const q1Map = { 'survival': -100, 'pleasure': -50, 'success': 0, 'relationships': 100, 'meaning': 200 };
            adjustment += q1Map[responses.q1] || 0;
            
            const q2Map = { 'avoid': -100, 'fight': -50, 'compete': 0, 'understand': 100, 'transcend': 200 };
            adjustment += q2Map[responses.q2] || 0;
            
            const q3Map = { 'essential': -100, 'enjoy': -50, 'status': 0, 'tools': 100, 'burden': 200 };
            adjustment += q3Map[responses.q3] || 0;
            
            const q4Map = { 'repetition': -100, 'experience': -50, 'systems': 0, 'reflection': 100, 'intuition': 200 };
            adjustment += q4Map[responses.q4] || 0;
            
            const q5Map = { 'resist': -100, 'excitement': -50, 'opportunity': 0, 'natural': 100, 'catalyst': 200 };
            adjustment += q5Map[responses.q5] || 0;
            
            // Advanced 8 questions 
            const q6Map = { 'blame': -80, 'resist': -40, 'accept': 0, 'lesson': 80, 'witness': 160 };
            adjustment += q6Map[responses.q6] || 0;
            
            const q7Map = { 'physical': -80, 'social': -40, 'achiever': 0, 'seeker': 80, 'awareness': 160 };
            adjustment += q7Map[responses.q7] || 0;
            
            const q8Map = { 'depend': -80, 'follow': -40, 'challenge': 0, 'discern': 80, 'beyond': 160 };
            adjustment += q8Map[responses.q8] || 0;
            
            const q9Map = { 'day': -80, 'linear': -40, 'building': 0, 'cycles': 80, 'eternal': 160 };
            adjustment += q9Map[responses.q9] || 0;
            
            const q10Map = { 'safety': -80, 'duty': -40, 'achievement': 0, 'authentic': 80, 'service': 160 };
            adjustment += q10Map[responses.q10] || 0;
            
            const q11Map = { 'fear': -80, 'separate': -40, 'partner': 0, 'love': 80, 'self': 160 };
            adjustment += q11Map[responses.q11] || 0;
            
            const q12Map = { 'experience': -80, 'tradition': -40, 'analysis': 0, 'insight': 80, 'intuition': 160 };
            adjustment += q12Map[responses.q12] || 0;
            
            const q13Map = { 'separate': -80, 'tribal': -40, 'network': 0, 'heart': 80, 'unity': 160 };
            adjustment += q13Map[responses.q13] || 0;
            
            return adjustment;
        }

        function determineSoulStage(soulAge) {
            if (soulAge <= 155) {
                return {
                    name: 'Infant Soul',
                    description: 'You are in the early stages of human experience, learning basic survival and how to exist in a physical body.',
                    range: [1, 155]
                };
            } else if (soulAge <= 310) {
                return {
                    name: 'Baby Soul',
                    description: 'You are learning structure, rules, and how to belong to groups and communities.',
                    range: [156, 310]
                };
            } else if (soulAge <= 465) {
                return {
                    name: 'Young Soul',
                    description: 'You are focused on achievement, success, and making your mark in the world.',
                    range: [311, 465]
                };
            } else if (soulAge <= 620) {
                return {
                    name: 'Mature Soul',
                    description: 'You are exploring emotional depth, relationships, and authentic self-expression.',
                    range: [466, 620]
                };
            } else {
                return {
                    name: 'Old Soul',
                    description: 'You are seeking wisdom, spiritual truth, and ways to serve humanity\'s evolution.',
                    range: [621, 777]
                };
            }
        }

        function calculateConfidence(astroFactors, surveyResponses) {
            // Simple confidence calculation based on consistency of indicators
            let score = 0;
            
            // Check if astrological and survey indicators align
            const expectedSurveyStage = Math.floor((astroFactors.dayOfYear + astroFactors.atmakaraka * 50) / 155);
            const surveyAdjustment = calculateSurveyAdjustment(surveyResponses);
            const surveyStage = Math.floor((surveyAdjustment + 500) / 200);
            
            if (Math.abs(expectedSurveyStage - surveyStage) <= 1) score += 50;
            if (astroFactors.atmakaraka > 6) score += 25; // Higher planets indicate more experience
            if (currentLocationData) score += 25; // Having location data increases confidence
            
            if (score >= 75) return 'high';
            if (score >= 50) return 'medium';
            return 'low';
        }

        function getSoulCharacteristics(stage, soulAge) {
            const characteristics = {
                strengths: [],
                challenges: [],
                focus: [],
                practices: []
            };
            
            if (stage.name === 'Infant Soul') {
                characteristics.strengths = [
                    "Natural innocence and wonder",
                    "Strong survival instincts", 
                    "Ability to live in the present moment",
                    "Direct, uncomplicated approach to life"
                ];
                characteristics.challenges = [
                    "Fear of new experiences",
                    "Difficulty with complex emotions",
                    "Need for safety and routine",
                    "Limited perspective on life's bigger picture"
                ];
                characteristics.focus = [
                    "Basic survival and security",
                    "Learning to navigate physical world",
                    "Developing simple social skills",
                    "Building trust in others"
                ];
                characteristics.practices = [
                    "Grounding exercises and nature connection",
                    "Simple meditation and breathing",
                    "Gentle yoga and body awareness",
                    "Creating safe, nurturing environments"
                ];
            } else if (stage.name === 'Baby Soul') {
                characteristics.strengths = [
                    "Strong sense of right and wrong",
                    "Loyalty and commitment to groups",
                    "Appreciation for tradition and order",
                    "Reliable and responsible nature"
                ];
                characteristics.challenges = [
                    "Rigidity and resistance to change",
                    "Tendency to judge others harshly",
                    "Fear of stepping outside comfort zone",
                    "Difficulty accepting different viewpoints"
                ];
                characteristics.focus = [
                    "Building stable communities and families",
                    "Following moral and ethical guidelines",
                    "Preserving traditions and values",
                    "Creating order from chaos"
                ];
                characteristics.practices = [
                    "Group worship or spiritual community",
                    "Traditional meditation or prayer",
                    "Service work within established organizations",
                    "Study of moral and ethical teachings"
                ];
            } else if (stage.name === 'Young Soul') {
                characteristics.strengths = [
                    "High energy and ambition",
                    "Natural leadership abilities",
                    "Confidence and self-reliance",
                    "Ability to manifest goals"
                ];
                characteristics.challenges = [
                    "Ego-driven decision making",
                    "Difficulty with emotional depth",
                    "Tendency toward materialism",
                    "Impatience with others' limitations"
                ];
                characteristics.focus = [
                    "Achievement and worldly success",
                    "Building personal power and influence",
                    "Material accumulation and status",
                    "Individual recognition and fame"
                ];
                characteristics.practices = [
                    "Goal-setting and achievement practices",
                    "Competitive sports and challenges",
                    "Leadership development and networking",
                    "Success-oriented meditation and visualization"
                ];
            } else if (stage.name === 'Mature Soul') {
                characteristics.strengths = [
                    "Deep emotional intelligence",
                    "Capacity for intimate relationships",
                    "Authenticity and self-awareness",
                    "Natural counseling and healing abilities"
                ];
                characteristics.challenges = [
                    "Emotional intensity and drama",
                    "Difficulty with boundaries",
                    "Tendency toward co-dependency",
                    "Existential anxiety and questioning"
                ];
                characteristics.focus = [
                    "Deep personal relationships",
                    "Emotional healing and growth",
                    "Authentic self-expression",
                    "Psychological understanding"
                ];
                characteristics.practices = [
                    "Therapy and counseling work",
                    "Relationship and communication skills",
                    "Emotional healing modalities",
                    "Creative and artistic expression"
                ];
            } else { // Old Soul
                characteristics.strengths = [
                    "Natural wisdom and perspective",
                    "Compassion for all beings",
                    "Spiritual insight and intuition",
                    "Ability to see the bigger picture"
                ];
                characteristics.challenges = [
                    "Feeling disconnected from material world",
                    "Difficulty relating to younger souls",
                    "Tendency toward isolation",
                    "Impatience with society's pace"
                ];
                characteristics.focus = [
                    "Spiritual growth and enlightenment",
                    "Service to humanity",
                    "Teaching and sharing wisdom",
                    "Simple, meaningful living"
                ];
                characteristics.practices = [
                    "Meditation and contemplation",
                    "Service work and volunteering",
                    "Study of spiritual texts and teachings",
                    "Mentoring and teaching others"
                ];
            }
            
            return characteristics;
        }

        function displayResults(results) {
            // Update main display
            document.getElementById('soulAgeNumber').textContent = '~' + results.soulAge;
            document.getElementById('soulStage').textContent = results.stage;
            document.getElementById('soulStageDescription').textContent = results.stageDescription;
            document.getElementById('incarnationRange').textContent = 
                results.range[0] + '-' + results.range[1];
            document.getElementById('earthYears').textContent = 
                '~' + Math.round(results.earthYears / 1000) + 'k';
            document.getElementById('spiralLevel').textContent = 
                results.spiralLevel + getOrdinalSuffix(results.spiralLevel);
            document.getElementById('remainingLives').textContent = results.remainingLives;
            
            // Update confidence display
            const confidenceDot = document.getElementById('confidenceDot');
            const confidenceText = document.getElementById('confidenceText');
            confidenceDot.className = 'confidence-dot confidence-' + results.confidence;
            
            const confidenceLabels = {
                'high': 'High Confidence',
                'medium': 'Medium Confidence', 
                'low': 'Low Confidence'
            };
            confidenceText.textContent = confidenceLabels[results.confidence];
            
            // Update detailed stage description
            displayStageDescription(results.stage, results.stageDescription);
            
            // Update characteristics with Jaimini insights
            displayCharacteristics(results.characteristics, results.jaiminiInsights);
            
            // Show results
            document.getElementById('results').classList.add('show');
        }

        function displayStageDescription(stageName, stageDescription) {
            const card = document.getElementById('stageDescriptionCard');
            const title = document.getElementById('stageDescriptionTitle');
            const text = document.getElementById('stageDescriptionText');
            
            title.textContent = 'Understanding Your ' + stageName + ' Nature';
            text.textContent = stageDescription;
            
            // Add stage-specific styling
            card.className = 'stage-description-card';
            if (stageName.includes('Infant')) card.classList.add('infant');
            else if (stageName.includes('Baby')) card.classList.add('baby');
            else if (stageName.includes('Young')) card.classList.add('young');
            else if (stageName.includes('Mature')) card.classList.add('mature');
            else if (stageName.includes('Old')) card.classList.add('old');
        }

        function displayCharacteristics(characteristics, jaiminiInsights) {
            const container = document.getElementById('characteristicsDisplay');
            
            let jaiminiInsightsHtml = '';
            if (jaiminiInsights) {
                jaiminiInsightsHtml = `
                    <div class="jaimini-insights">
                        <h4>üèõÔ∏è Jaimini Insights</h4>
                        <p>${jaiminiInsights.jaiminiSummary}</p>
                    </div>
                `;
            }
            
            container.innerHTML = '<div class="characteristics-grid">' +
                '<div class="characteristic-card">' +
                    '<h3 class="characteristic-title">Your Strengths</h3>' +
                    '<ul class="characteristic-list">' +
                        characteristics.strengths.map(item => '<li>' + item + '</li>').join('') +
                    '</ul>' +
                '</div>' +
                '<div class="characteristic-card">' +
                    '<h3 class="characteristic-title">Growth Challenges</h3>' +
                    '<ul class="characteristic-list">' +
                        characteristics.challenges.map(item => '<li>' + item + '</li>').join('') +
                    '</ul>' +
                '</div>' +
                '<div class="characteristic-card">' +
                    '<h3 class="characteristic-title">Life Focus Areas</h3>' +
                    '<ul class="characteristic-list">' +
                        characteristics.focus.map(item => '<li>' + item + '</li>').join('') +
                    '

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soul Age Calculator - Vedantic & Theosophical Analysis</title>
    
    <!-- Security Headers via Meta Tags -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://nominatim.openstreetmap.org; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self' https://nominatim.openstreetmap.org; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="no-referrer">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <!-- SEO & Privacy Compliant Meta Tags -->
    <meta name="description" content="Discover your soul's evolutionary journey through 777 incarnations using Vedantic wisdom and Theosophical teachings. GDPR-compliant, no data storage.">
    <meta name="keywords" content="soul age, 777 incarnations, Vedanta, Theosophy, spiritual evolution, Jaimini astrology, karma, reincarnation">
    <meta name="author" content="Soul Age Calculator">
    <meta name="robots" content="index, follow">
    
    <!-- Privacy & Security -->
    <meta name="privacy" content="No user data collected or stored">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Soul Age Calculator - Discover Your Spiritual Evolution">
    <meta property="og:description" content="Calculate your position in the 777-incarnation journey using ancient Vedantic and Theosophical wisdom.">
    
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #06B6D4;
            --accent: #F59E0B;
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --text: #1F2937;
            --text-light: #6B7280;
            --border: #E5E7EB;
            --bg-light: #F9FAFB;
            --shadow: rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            --sacred-gold: #D97706;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px var(--shadow);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 3rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            color: #6B7280;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .privacy-notice {
            display: inline-block;
            background: #10B98120;
            color: #065F46;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        /* Tabs Navigation */
        .tabs-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 15px;
            box-shadow: 0 10px 25px var(--shadow);
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 24px;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #6B7280;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            background: #F3F4F6;
        }

        .tab-btn.active {
            background: var(--gradient);
            color: white;
            border-color: transparent;
        }

        .tab-icon {
            font-size: 1.2rem;
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sections */
        .section {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px var(--shadow);
            position: relative;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--bg-light);
        }

        .section-icon {
            font-size: 2rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--text);
            font-weight: 700;
        }

        /* Form Styles */
        .input-group {
            margin-bottom: 25px;
        }

        .input-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text);
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .time-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .unknown-time-btn {
            background: var(--bg-light);
            color: var(--text-light);
            padding: 10px 20px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .unknown-time-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .location-input-container {
            position: relative;
        }

        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .autocomplete-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: background 0.2s;
        }

        .autocomplete-item:hover {
            background: #F3F4F6;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        .autocomplete-item .location-name {
            font-weight: 600;
            color: var(--text);
        }

        .autocomplete-item .location-details {
            display: block;
            font-size: 0.85rem;
            color: #6B7280;
            margin-top: 2px;
        }

        .search-status {
            padding: 10px 15px;
            color: #6B7280;
            font-size: 0.9rem;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .search-status.loading {
            color: var(--primary);
        }

        /* Survey Questions */
        .survey-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .question-card {
            background: #F9FAFB;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
        }

        .question-card select {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        /* Validation */
        .validation-icon {
            display: none;
            font-size: 1.2rem;
            margin-left: 10px;
        }

        .validation-icon.valid {
            display: inline;
            color: var(--success);
        }

        .validation-icon.invalid {
            display: inline;
            color: var(--error);
        }

        .error-message {
            display: none;
            color: var(--error);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .error-message.show {
            display: block;
        }

        /* Calculate Button */
        .calculate-btn {
            background: var(--gradient);
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 250px;
            box-shadow: 0 10px 25px rgba(147, 51, 234, 0.3);
        }

        .calculate-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(147, 51, 234, 0.4);
        }

        .calculate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Results Display */
        .results-container {
            display: none;
            margin-top: 30px;
        }

        .results-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .soul-age-display {
            background: var(--gradient);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .soul-age-display::before {
            content: '‚ò∏';
            position: absolute;
            top: -50px;
            right: -50px;
            font-size: 200px;
            opacity: 0.1;
        }

        .soul-age-number {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .soul-stage {
            font-size: 1.5rem;
            margin-bottom: 20px;
            opacity: 0.95;
        }

        .soul-stage-description {
            font-size: 1.1rem;
            margin-bottom: 25px;
            opacity: 0.9;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .incarnation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Stage Descriptions Section */
        .stage-description-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid var(--primary);
        }

        .stage-description-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stage-description-text {
            line-height: 1.7;
            color: var(--text);
            margin-bottom: 15px;
        }

        .stage-traits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .trait-group {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 10px;
        }

        .trait-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .trait-list {
            font-size: 0.95rem;
            color: var(--text-light);
            line-height: 1.5;
        }

        /* Confidence Indicators */
        .confidence-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .confidence-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .confidence-dot.confidence-high {
            background: var(--success);
        }

        .confidence-dot.confidence-medium {
            background: var(--warning);
        }

        .confidence-dot.confidence-low {
            background: var(--error);
        }

        .confidence-text {
            font-weight: 600;
            color: white;
        }

        /* Understanding Tab Styles */
        .wisdom-card {
            background: linear-gradient(135deg, #F9FAFB 0%, #F3F4F6 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid var(--sacred-gold);
        }

        .wisdom-header {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 15px;
        }

        .evolution-stages {
            display: grid;
            gap: 20px;
            margin-top: 25px;
        }

        .stage-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 12px var(--shadow);
            border-left: 4px solid;
        }

        .stage-card.infant { border-left-color: #EF4444; }
        .stage-card.baby { border-left-color: #F59E0B; }
        .stage-card.young { border-left-color: #10B981; }
        .stage-card.mature { border-left-color: #3B82F6; }
        .stage-card.old { border-left-color: #8B5CF6; }

        .stage-number {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stage-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .stage-range {
            color: var(--text-light);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .stage-traits-list {
            margin-top: 15px;
        }

        .stage-traits-list li {
            margin-bottom: 5px;
            color: var(--text-light);
        }

        /* FAQ Styles */
        .faq-section {
            margin-top: 30px;
        }

        .faq-category {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px var(--shadow);
        }

        .faq-category-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: color 0.3s ease;
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-answer {
            display: none;
            padding-top: 15px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .faq-answer.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .faq-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .faq-toggle.rotated {
            transform: rotate(180deg);
        }

        /* Characteristics Display */
        .characteristics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .characteristic-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        .characteristic-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .characteristic-list {
            list-style: none;
        }

        .characteristic-list li {
            padding: 5px 0;
            color: var(--text-light);
            position: relative;
            padding-left: 20px;
        }

        .characteristic-list li:before {
            content: '‚Ä¢';
            color: var(--primary);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .tabs-nav {
                flex-direction: column;
            }
            
            .time-grid {
                grid-template-columns: 1fr;
            }
            
            .soul-age-number {
                font-size: 3rem;
            }
            
            .incarnation-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üïâÔ∏è Soul Age Calculator</h1>
            <p class="subtitle">Discover Your Position in the 777-Incarnation Journey</p>
            <p style="color: #6B7280; font-size: 0.95rem;">
                Based on Ancient Vedantic Wisdom & Theosophical Teachings
            </p>
            <div class="privacy-notice">
                üîí Completely Private - No Data Stored
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tabs-nav">
            <button class="tab-btn active" onclick="switchTab('calculator-tab', this)">
                <span class="tab-icon">üßÆ</span>
                Calculator
            </button>
            <button class="tab-btn" onclick="switchTab('understanding-tab', this)">
                <span class="tab-icon">üïâÔ∏è</span>
                Understanding
            </button>
            <button class="tab-btn" onclick="switchTab('jaimini-tab', this)">
                <span class="tab-icon">üîÆ</span>
                Jaimini Analysis
            </button>
            <button class="tab-btn" onclick="switchTab('faq-tab', this)">
                <span class="tab-icon">‚ùì</span>
                FAQ
            </button>
        </div>

        <!-- Tab 1: Calculator -->
        <div id="calculator-tab" class="tab-content active">
            <!-- Birth Information -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üìÖ</span>
                    <h2 class="section-title">Birth Information</h2>
                </div>

                <div class="input-group">
                    <label class="input-label">Birth Date *</label>
                    <input type="date" id="birthDate" class="input-field" onchange="validateDate()" required>
                    <span id="dateValidation" class="validation-icon">‚úì</span>
                    <div id="dateError" class="error-message"></div>
                </div>

               <div class="input-group">
    <label class="input-label">Birth Time (Optional - defaults to noon if not provided)</label>
    <div class="time-grid">
        <div>
            <label style="font-size: 0.9rem; color: #6B7280;">Hour</label>
            <select id="birthHour" class="input-field" onchange="validateTime()">
                <option value="">Hour</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
            </select>
        </div>
        <div>
            <label style="font-size: 0.9rem; color: #6B7280;">Minute</label>
            <select id="birthMinute" class="input-field" onchange="validateTime()">
                <option value="">Min</option>
                <option value="0">00</option>
                <option value="1">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>
            </select>
        </div>
        <div>
            <label style="font-size: 0.9rem; color: #6B7280;">AM/PM</label>
            <select id="ampm" class="input-field" onchange="validateTime()">
                <option value="">AM/PM</option>
                <option value="AM">AM</option>
                <option value="PM">PM</option>
            </select>
        </div>
    </div>
    <button type="button" class="unknown-time-btn" onclick="useUnknownTime()">
        Don't Know Time - Use Noon
    </button>
    <span id="timeValidation" class="validation-icon">‚úì</span>
    <div id="timeError" class="error-message"></div>
</div>

            <!-- Soul Insights Survey -->
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üßø</span>
                    <h2 class="section-title">Soul Insights Survey</h2>
                </div>
                <p style="color: #6B7280; margin-bottom: 20px;">
                    These questions help refine your soul age calculation by understanding your current life patterns and spiritual inclinations.
                </p>

                <div class="survey-grid">
                    <div class="question-card">
                        <div class="question-text">What drives you most in life?</div>
                        <select id="q1">
                            <option value="">Select one...</option>
                            <option value="survival">Basic survival, security, and material needs</option>
                            <option value="pleasure">Pleasure, excitement, and new experiences</option>
                            <option value="success">Success, achievement, and recognition</option>
                            <option value="relationships">Deep relationships and emotional connections</option>
                            <option value="meaning">Meaning, wisdom, and spiritual growth</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you typically handle conflict?</div>
                        <select id="q2">
                            <option value="">Select one...</option>
                            <option value="avoid">Avoid it at all costs</option>
                            <option value="fight">Fight aggressively to win</option>
                            <option value="compete">Compete strategically</option>
                            <option value="understand">Seek to understand all perspectives</option>
                            <option value="transcend">Find ways to transcend the conflict entirely</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What's your relationship with material possessions?</div>
                        <select id="q3">
                            <option value="">Select one...</option>
                            <option value="essential">They're essential for my sense of security</option>
                            <option value="enjoy">I enjoy them but they're not everything</option>
                            <option value="status">They represent my success and status</option>
                            <option value="tools">They're just tools for deeper purposes</option>
                            <option value="burden">They often feel like a burden</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">How do you learn best?</div>
                        <select id="q4">
                            <option value="">Select one...</option>
                            <option value="repetition">Through repetition and following rules</option>
                            <option value="experience">Through direct, often intense experiences</option>
                            <option value="systems">Through structured systems and methods</option>
                            <option value="reflection">Through deep reflection and inner work</option>
                            <option value="intuition">Through intuition and spiritual insight</option>
                        </select>
                    </div>

                    <div class="question-card">
                        <div class="question-text">What's your attitude toward change?</div>
                        <select id="q5">
                            <option value="">Select one...</option>
                            <option value="resist">I strongly resist most changes</option>
                            <option value="excitement">I seek change for excitement</option>
                            <option value="opportunity">I see change as opportunity for growth</option>
                            <option value="natural">I accept change as natural and necessary</option>
                            <option value="catalyst">I often catalyze change in others</option>
                        </select>
                    </div>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateSoulAge()" disabled>
                ‚ú® Calculate My Soul Age ‚ú®
            </button>

            <!-- Results Section -->
            <div id="results" class="results-container">
                <div class="soul-age-display">
                    <div class="confidence-indicator">
                        <span id="confidenceDot" class="confidence-dot"></span>
                        <span id="confidenceText" class="confidence-text"></span>
                    </div>
                    
                    <div class="soul-age-number" id="soulAgeNumber">~</div>
                    <div class="soul-stage" id="soulStage">Calculating...</div>
                    <div class="soul-stage-description" id="soulStageDescription"></div>

                    <div class="incarnation-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="incarnationRange">-</div>
                            <div class="stat-label">Incarnation Range</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="earthYears">-</div>
                            <div class="stat-label">Earth Years</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="spiralLevel">-</div>
                            <div class="stat-label">Evolutionary Spiral</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="remainingLives">-</div>
                            <div class="stat-label">Remaining Lives</div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Stage Description -->
                <div id="stageDescriptionCard" class="stage-description-card">
                    <div class="stage-description-title" id="stageDescriptionTitle"></div>
                    <div class="stage-description-text" id="stageDescriptionText"></div>
                    <div class="stage-traits" id="stageTraits"></div>
                </div>

                <!-- Characteristics Section -->
                <div class="section">
                    <div class="section-header">
                        <span class="section-icon">üéØ</span>
                        <h2 class="section-title">Your Soul Characteristics</h2>
                    </div>
                    <div id="characteristicsDisplay">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Understanding -->
        <div id="understanding-tab" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üïâÔ∏è</span>
                    <h2 class="section-title">The 777-Incarnation Framework</h2>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üìú</span>
                        <span>What This Calculator Does</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        This calculator determines where you are in your soul's 777-lifetime journey on Earth. Based on ancient spiritual teachings from India (Vedanta) and 19th-century Theosophical wisdom, it calculates your approximate "soul age" - how many lifetimes you've experienced as a human being.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        Think of it like determining what grade you're in at "Earth School." Just as students progress through elementary, middle school, high school, and college, souls progress through different stages of human development across many lifetimes.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üåü</span>
                        <span>The Five Soul Ages Explained Simply</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563; margin-bottom: 20px;">
                        Every human soul progresses through five main stages during their Earth incarnations. Each stage has its own lessons, challenges, and ways of seeing the world:
                    </p>

                    <div class="evolution-stages">
                        <div class="stage-card infant">
                            <div class="stage-number">Stage 1</div>
                            <div class="stage-name">Infant Soul (Lives 1-155)</div>
                            <div class="stage-range">The "Kindergarten" of Human Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Basic human survival, how bodies work, basic social rules.
                                <br><strong>Like:</strong> A child learning to walk and talk - everything is new and overwhelming.
                                <br><strong>Focus:</strong> Safety, following rules, staying alive, simple pleasures.
                                <br><strong>Challenges:</strong> Fear of the unknown, need for security, difficulty with complexity.
                                <br><strong>Common Traits:</strong> Simple lifestyle preferences, traditional values, literal thinking, strong tribal/group loyalties, fear of change, focus on basic needs and comforts.
                            </div>
                        </div>

                        <div class="stage-card baby">
                            <div class="stage-number">Stage 2</div>
                            <div class="stage-name">Baby Soul (Lives 156-310)</div>
                            <div class="stage-range">The "Elementary School" Phase</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Right vs. wrong, group belonging, tradition, authority.
                                <br><strong>Like:</strong> A child who wants clear rules and gets upset when others break them.
                                <br><strong>Focus:</strong> Order, tradition, belonging to groups, moral certainty.
                                <br><strong>Challenges:</strong> Judging others, rigidity, fear of being different.
                                <br><strong>Common Traits:</strong> Strong moral convictions, traditional religious or political beliefs, difficulty accepting different lifestyles, focus on duty and conformity, black-and-white thinking.
                            </div>
                        </div>

                        <div class="stage-card young">
                            <div class="stage-number">Stage 3</div>
                            <div class="stage-name">Young Soul (Lives 311-465)</div>
                            <div class="stage-range">The "High School" Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Personal power, achievement, independence, success.
                                <br><strong>Like:</strong> A teenager wanting to prove themselves and make their mark on the world.
                                <br><strong>Focus:</strong> Success, recognition, building things, competition, material achievement.
                                <br><strong>Challenges:</strong> Ego, workaholism, sacrificing relationships for success.
                                <br><strong>Common Traits:</strong> Highly ambitious, competitive, materialistic, excellent at building careers/businesses, impatient with "inefficiency," often wealthy or power-seeking.
                            </div>
                        </div>

                        <div class="stage-card mature">
                            <div class="stage-number">Stage 4</div>
                            <div class="stage-name">Mature Soul (Lives 466-620)</div>
                            <div class="stage-range">The "College Years" of Soul Development</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Emotional depth, authentic relationships, inner truth, psychology.
                                <br><strong>Like:</strong> A college student questioning everything they were taught and seeking deeper meaning.
                                <br><strong>Focus:</strong> Relationships, emotions, authenticity, personal growth, therapy.
                                <br><strong>Challenges:</strong> Emotional intensity, relationship drama, existential angst.
                                <br><strong>Common Traits:</strong> Emotionally intense, drawn to therapy/psychology, questions authority, values authenticity over success, relationship-focused, often in helping professions.
                            </div>
                        </div>

                        <div class="stage-card old">
                            <div class="stage-number">Stage 5</div>
                            <div class="stage-name">Old Soul (Lives 621-777)</div>
                            <div class="stage-range">The "Graduate School" of Human Experience</div>
                            <div class="stage-description-text">
                                <strong>What they're learning:</strong> Wisdom, detachment, service, spiritual truth, universal love.
                                <br><strong>Like:</strong> A wise professor who's "been there, done that" and now wants to help others.
                                <br><strong>Focus:</strong> Wisdom, teaching, service, spirituality, simplicity, peace.
                                <br><strong>Challenges:</strong> Feeling disconnected from materialism, difficulty fitting into society.
                                <br><strong>Common Traits:</strong> Spiritually oriented, comfortable with solitude, often in teaching/healing roles, simple lifestyle, wise beyond their years, sometimes feel like they don't belong.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üîÑ</span>
                        <span>Why 777 Lives?</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        The number 777 comes from ancient spiritual mathematics. In many traditions, 7 represents completion and perfection. The triple 7 (777) represents the complete journey of human soul evolution. It's calculated as 7 major cycles √ó 111 incarnations each = 777 total human lives needed to learn everything Earth has to teach us.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>‚öñÔ∏è</span>
                        <span>Important Disclaimers</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        <strong>This is for Entertainment & Self-Reflection:</strong> This calculator is based on spiritual theories, not scientific facts. Use it as a tool for self-understanding and personal growth, not as absolute truth about your soul or destiny.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        <strong>Every Soul is Unique:</strong> Even souls at the same "age" can be very different. Your individual life experiences, choices, and karma create your unique path.
                    </p>
                </div>
            </div>
        </div>

        <!-- Tab 3: Jaimini Analysis -->
        <div id="jaimini-tab" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">üîÆ</span>
                    <h2 class="section-title">Jaimini (Jamakkol) Astrological Analysis</h2>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üìú</span>
                        <span>What is Jaimini/Jamakkol Astrology?</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        <strong>Jaimini astrology</strong>, also called <strong>Jamakkol</strong>, is a special type of Indian astrology developed by an ancient sage named Jaimini thousands of years ago. Unlike regular astrology that focuses on planets, Jaimini astrology focuses on the deeper patterns of your soul's journey.
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        Think of regular astrology as looking at what's happening on the surface of a lake, while Jaimini astrology dives deep to understand the currents and depths beneath. It specializes in understanding your <strong>karmic patterns</strong> - the lessons your soul came here to learn.
                    </p>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üéØ</span>
                        <span>How This Calculator Uses Jaimini Principles</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        Our calculator uses several key Jaimini concepts to determine your soul age:
                    </p>
                    <ul style="margin-top: 15px; padding-left: 20px; line-height: 1.8; color: #4B5563;">
                        <li><strong>Atmakaraka:</strong> Your "soul's main planet" - the planet that shows what your soul is trying to learn</li>
                        <li><strong>Arudha Lagna:</strong> How others perceive you vs. who you really are (shows soul maturity)</li>
                        <li><strong>Chara Karakas:</strong> The seven planets that represent different aspects of your soul's journey</li>
                        <li><strong>Jaimini Aspects:</strong> Special planetary connections that reveal karmic relationships</li>
                        <li><strong>Pada System:</strong> A unique way of calculating life themes that's different from regular astrology</li>
                    </ul>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>üîç</span>
                        <span>What Makes Jaimini Different?</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        Regular astrology might tell you "You'll be successful in business." Jaimini astrology asks deeper questions like "What karmic lessons is your soul learning through business?" or "How does your work serve your soul's evolution?"
                    </p>
                    <p style="margin-top: 15px; line-height: 1.8; color: #4B5563;">
                        It's particularly good at understanding:
                    </p>
                    <ul style="margin-top: 10px; padding-left: 20px; line-height: 1.8; color: #4B5563;">
                        <li>Why you chose your current family and relationships</li>
                        <li>What your soul's main purpose is in this lifetime</li>
                        <li>What lessons you're working on from past lives</li>
                        <li>How "old" or experienced your soul is</li>
                    </ul>
                </div>

                <div class="wisdom-card">
                    <div class="wisdom-header">
                        <span>‚ö°</span>
                        <span>The Soul Age Connection</span>
                    </div>
                    <p style="line-height: 1.8; color: #4B5563;">
                        By analyzing your birth chart through Jaimini principles, the calculator can estimate where you are in your 777-incarnation journey. It looks at factors like:
                    </p>
                    <ul style="margin-top: 15px; padding-left: 20px; line-height: 1.8; color: #4B5563;">
                        <li>How complex your karmic patterns are</li>
                        <li>Whether you're learning basic lessons or advanced spiritual concepts</li>
                        <li>How you relate to material success vs. spiritual growth</li>
                        <li>Your natural wisdom level and life approach</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Tab 4: FAQ -->
        <div id="faq-tab" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <span class="section-icon">‚ùì</span>
                    <h2 class="section-title">Frequently Asked Questions</h2>
                </div>
                <p style="color: #6B7280; margin-bottom: 30px;">
                    Here are the most common questions people ask about soul age and this calculator. Click any question to see the answer.
                </p>

                <div class="faq-section">
                    <!-- Basic Concepts -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üåü</span>
                            Basic Concepts
                        </h3>
                        
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What exactly is a "soul age"?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Soul age refers to how many lifetimes your soul has experienced as a human being on Earth. It's like asking "what grade are you in?" at the school of human experience. A newer soul might be in "kindergarten" while an older soul might be in "graduate school."
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Do I really have a soul, and does it actually reincarnate?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator is based on spiritual beliefs about reincarnation, not scientific facts. Many religions and spiritual traditions believe in souls and multiple lifetimes, while others don't. Use this as a tool for self-reflection rather than absolute truth. What matters is whether the insights help you understand yourself better.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Why 777 lives specifically? Where does this number come from?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The number 777 comes from ancient spiritual mathematics found in Hindu and Theosophical teachings. It represents 7 major evolutionary cycles √ó 111 incarnations each. Seven is considered a number of completion in many traditions, so triple 7 represents the complete human journey.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What's the difference between soul age and my physical age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Your physical age is how long your current body has been alive. Your soul age is about how many total lifetimes your soul has experienced. A 20-year-old could be an "old soul" if they've had many previous lifetimes, while a 60-year-old could be a "young soul" if they haven't had as many.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is being an "older soul" better than being a "younger soul"?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No! Each soul age has its own gifts and purposes. Young souls bring energy, ambition, and drive to build the world. Mature souls bring emotional depth and healing. Old souls bring wisdom and spiritual insight. We need all ages working together. It's not about being "better" - it's about being at different stages of learning.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can my soul age change during this lifetime?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Your core soul age stays the same throughout one lifetime, but you can learn lessons from other soul ages. For example, a mature soul might need to learn young soul lessons about achievement, or an old soul might need to learn baby soul lessons about structure. Growth happens within your soul age, not by jumping to a different age.
                            </div>
                        </div>
                    </div>

                    <!-- How the Calculator Works -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üßÆ</span>
                            How the Calculator Works
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How does this calculator actually determine my soul age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The calculator uses your birth information to create an astrological chart, then applies Jaimini astrology principles to analyze your soul patterns. It combines this with your survey responses about your life approach and values. It's like a spiritual algorithm that looks at multiple factors to estimate where you are in your soul's journey.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Why do you need my birth time and location?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Your exact birth time and location create your unique astrological chart - like a snapshot of where all the planets were when you were born. This chart is believed to show your soul's chosen lessons and patterns for this lifetime. Don't worry if you don't know your exact time - the calculator defaults to noon and still gives meaningful results.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What if I don't know my exact birth time?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                That's totally fine! The calculator automatically uses noon (12:00 PM) as a default if you don't provide a time or click "Don't Know Time - Use Noon." While the exact time can add precision, the date and location are more important for determining soul age. Many people don't know their exact birth time, and the calculator still provides valuable insights.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How accurate is this calculator?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The calculator provides estimates based on spiritual theories, not scientific measurements. Think of it like a personality test - it can offer insights and food for thought, but it's not a precise scientific instrument. Use the results as a starting point for self-reflection rather than absolute truth.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Why do you ask those survey questions?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The survey questions help refine your soul age estimate by understanding how you approach life right now. Your values, how you handle conflict, your relationship with material possessions, and how you learn all provide clues about your soul's maturity level and current lessons.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What is Jaimini astrology and why do you use it?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Jaimini is an ancient form of Vedic astrology that focuses specifically on the soul's journey and karmic patterns, making it perfect for soul age calculations. While regular astrology might predict events, Jaimini astrology looks at deeper spiritual patterns and the soul's evolutionary path.
                            </div>
                        </div>
                    </div>

                    <!-- Understanding Your Results -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üìä</span>
                            Understanding Your Results
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What do terms like "Infant Soul" or "Young Soul" actually mean?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                These are just names for different stages of soul development, like grade levels in school. "Infant" souls are new to human experience, "Baby" souls are learning rules and order, "Young" souls are focused on achievement and success, "Mature" souls are exploring emotions and relationships, and "Old" souls are seeking wisdom and spiritual truth.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                My result doesn't feel right to me. What does that mean?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Trust your intuition! This calculator provides estimates based on limited information. You might be transitioning between soul ages, have unusual karmic patterns, or the system might not capture your unique situation. Use the result as one perspective among many, not as the final word on who you are.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What does "confidence level" mean in my results?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The confidence level shows how certain the calculator is about your result based on how clear your chart patterns are. High confidence means your chart shows strong, consistent patterns. Lower confidence might mean you're between soul ages or have complex patterns that are harder to categorize.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What are "Earth Years" and why do they matter?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                "Earth Years" represents approximately how long your soul has been having human experiences on this planet across all lifetimes. It's calculated by multiplying your estimated incarnations by average human lifespan. It gives you a sense of how much total human experience your soul has accumulated.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What does "Evolutionary Spiral" mean?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The evolutionary spiral represents which of the seven major cycles of human development you're currently in. Think of it like which "semester" you're in at Earth University. Each spiral has different themes and lessons, building on the previous ones.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How many more lifetimes do I have left?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                The "Remaining Lives" is a rough estimate based on the 777-lifetime model. But remember, this is spiritual theory, not scientific fact! Your actual path depends on your choices, growth rate, and life purpose. Some souls might graduate early, others might take longer. Focus on making this lifetime meaningful rather than counting future ones.
                            </div>
                        </div>
                    </div>

                    <!-- Life Applications -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üå±</span>
                            Life Applications
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How can knowing my soul age help me in real life?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Understanding your soul age can help you: understand why certain things come easily to you while others are challenging, accept your natural approach to life rather than forcing yourself to be different, understand why you connect with some people more than others, focus on lessons that are appropriate for your development level, and be more compassionate with yourself and others.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can people of different soul ages have good relationships?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Absolutely! Different soul ages can complement each other beautifully. A young soul's drive might inspire an old soul to take action, while an old soul's wisdom might help a young soul find deeper meaning. The key is understanding and respecting each other's different approaches to life rather than trying to change each other.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Should I make major life decisions based on my soul age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No, don't make major decisions based solely on this calculator! Use soul age insights as one factor among many. Consider your practical circumstances, relationships, goals, and intuition too. This tool is for self-understanding and reflection, not for making big life choices.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                How do I work with the challenges of my soul age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Each soul age has natural challenges that are part of the learning process. Instead of fighting them, work with them consciously. If you're a young soul struggling with ego, practice humility. If you're a mature soul overwhelmed by emotions, learn healthy boundaries. If you're an old soul feeling disconnected, find ways to serve that energize you.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can I speed up my soul development?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Focus on growing within your current soul age rather than trying to rush to the next one. Conscious self-work, meditation, therapy, service to others, and learning from your experiences all contribute to soul growth. But remember, each soul age has valuable lessons - don't rush through them!
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What if I feel like I have traits from multiple soul ages?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This is totally normal! You might be in transition between ages, or learning lessons from other ages as part of your growth. Most people have a primary soul age but can access energies from other ages when needed. You might also be at the very beginning or end of a particular age, showing traits of the previous or next age.
                            </div>
                        </div>
                    </div>

                    <!-- Technical & Spiritual -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üîÆ</span>
                            Technical & Spiritual Questions
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is this calculator storing my personal information?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No, this calculator doesn't store any of your personal information. Everything is calculated in your browser and nothing is saved to any database. Your privacy is completely protected. This is clearly stated as "No Data Stored" in our privacy notice.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What spiritual traditions is this based on?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator combines concepts from Hindu Vedanta (especially the concept of Samsara - the cycle of birth and death), 19th-century Theosophy (Helena Blavatsky's teachings about soul evolution), and Jaimini astrology (an ancient Vedic astrological system). It synthesizes these traditions into a practical framework for understanding soul development.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Does this conflict with my religious beliefs?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This calculator is based on Eastern spiritual concepts that may or may not align with your religious beliefs. Many religions have different views on souls, afterlife, and reincarnation. Use this tool only if it feels helpful and doesn't conflict with your personal faith. It's meant for self-reflection, not to challenge your religious beliefs.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What happens after the 777th incarnation?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                According to these spiritual traditions, after completing the 777 human incarnations, the soul achieves "Moksha" (liberation) or "Ascension." This means the soul no longer needs to incarnate in human form and can choose to serve in other ways - as guides, teachers, or by moving to other dimensions of existence. But this is spiritual theory, not scientific fact.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can souls incarnate on other planets?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Some spiritual traditions believe souls can incarnate on different planets or dimensions, but this calculator focuses specifically on the human experience on Earth. The 777-incarnation framework is specifically about learning all the lessons available through human existence on our planet.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                What about karma and how does it relate to soul age?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Karma (the law of cause and effect from actions) is what drives the lessons at each soul age. Younger souls might be working out simpler karmas around survival and basic relationships, while older souls might be resolving more complex spiritual karmas. Your soul age influences what kinds of karmic lessons you're ready to handle.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is there scientific evidence for reincarnation or soul ages?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                No, there is no widely accepted scientific evidence for reincarnation or soul ages. These are spiritual and philosophical concepts, not scientific facts. Some researchers have studied cases suggestive of reincarnation, but the scientific community doesn't consider this proven. Use this calculator as a tool for self-reflection and personal growth, not as scientific truth.
                            </div>
                        </div>
                    </div>

                    <!-- Troubleshooting -->
                    <div class="faq-category">
                        <h3 class="faq-category-title">
                            <span>üõ†Ô∏è</span>
                            Troubleshooting
                        </h3>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                The calculator won't accept my birth location. What should I do?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Try typing just the city name first, then select from the dropdown options. If your exact location doesn't appear, choose the nearest major city. The calculator needs to find your location in its database to determine the correct timezone and geographical coordinates for your birth chart.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                I was born in a different country. Will this still work?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Yes! This calculator works for birth locations anywhere in the world. Just type your birth city and country, and select it from the dropdown. The system will automatically handle different timezones and geographical coordinates globally.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                The results seem to be loading forever. What's wrong?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                Try refreshing the page and entering your information again. Make sure you've filled in all required fields (birth date and location) and answered all the survey questions. If problems persist, try using a different browser or clearing your browser cache.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Can I calculate soul age for someone else?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                You can enter someone else's birth information, but the survey questions should really be answered by that person themselves since they're about personal attitudes and approaches to life. The most accurate results come when people use the calculator for themselves.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Why do I get different results when I use the calculator multiple times?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                If you're changing your survey answers, you might get slightly different results since those responses affect the calculation. If you're using the exact same information and getting different results, that shouldn't happen - try refreshing your browser or clearing the cache.
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">
                                Is there a mobile app version of this calculator?
                                <span class="faq-toggle">‚ñº</span>
                            </div>
                            <div class="faq-answer">
                                This web-based calculator is designed to work well on mobile devices through your web browser. There's no separate app needed - just visit this website on your phone or tablet and it will automatically adapt to your screen size.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentLocationData = null;
        let searchTimeout = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            validateForm();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Date validation
            document.getElementById('birthDate').addEventListener('change', validateForm);
            
            // Time validation
            ['birthHour', 'birthMinute', 'ampm'].forEach(id => {
                const el = document.getElementById(id);
                el.addEventListener('change', () => {
                    validateTime();
                    validateForm();
                });
            });
            
            // Location validation
            document.getElementById('birthLocation').addEventListener('input', () => {
                validateLocation();
                validateForm();
            });

            // Survey validation
            ['q1', 'q2', 'q3', 'q4', 'q5'].forEach(id => {
                document.getElementById(id).addEventListener('change', validateForm);
            });
        }

        // Tab switching
        function switchTab(tabId, buttonEl) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab and activate button
            document.getElementById(tabId).classList.add('active');
            buttonEl.classList.add('active');
        }

        // Validation Functions
        function validateDate() {
            const input = document.getElementById('birthDate');
            const date = new Date(input.value);
            const now = new Date();
            const minDate = new Date(now.getFullYear() - 150, 0, 1);
            
            if (!input.value) {
                showError('dateError', 'Birth date is required');
                showValidation('dateValidation', false);
                return false;
            }
            
            if (date > now) {
                showError('dateError', 'Birth date cannot be in the future');
                showValidation('dateValidation', false);
                return false;
            }
            
            if (date < minDate) {
                showError('dateError', 'Birth date seems too far in the past');
                showValidation('dateValidation', false);
                return false;
            }
            
            hideError('dateError');
            showValidation('dateValidation', true);
            return true;
        }

        function validateTime() {
            const hour = document.getElementById('birthHour').value;
            const minute = document.getElementById('birthMinute').value;
            const ampm = document.getElementById('ampm').value;
            
            // Time is optional - if any fields are empty, that's okay (will default to noon)
            if (!hour && !minute && !ampm) {
                showValidation('timeValidation', true);
                hideError('timeError');
                return true;
            }
            
            // If any field is filled, validate the complete time
            if (!hour || !ampm) {
                showError('timeError', 'Please complete the time or click "Don\'t Know Time"');
                showValidation('timeValidation', false);
                return false;
            }
            
            const hourNum = parseInt(hour);
            const minuteNum = parseInt(minute);
            
            if (hourNum < 1 || hourNum > 12) {
                showError('timeError', 'Hour must be between 1 and 12');
                showValidation('timeValidation', false);
                return false;
            }
            
            if (minuteNum < 0 || minuteNum > 59) {
                showError('timeError', 'Minutes must be between 0 and 59');
                showValidation('timeValidation', false);
                return false;
            }
            
            hideError('timeError');
            showValidation('timeValidation', true);
            return true;
        }

        function validateLocation() {
            const input = document.getElementById('birthLocation');
            
            if (!input.value.trim()) {
                showError('locationError', 'Birth location is required');
                showValidation('locationValidation', false);
                return false;
            }
            
            if (!currentLocationData) {
                showError('locationError', 'Please select a location from the dropdown');
                showValidation('locationValidation', false);
                return false;
            }
            
            hideError('locationError');
            showValidation('locationValidation', true);
            return true;
        }

        function validateForm() {
            const dateValid = validateDate();
            const timeValid = validateTime();
            const locationValid = validateLocation();
            
            // Check survey questions
            const surveyValid = ['q1', 'q2', 'q3', 'q4', 'q5'].every(id => 
                document.getElementById(id).value !== ''
            );
            
            const allValid = dateValid && timeValid && locationValid && surveyValid;
            document.querySelector('.calculate-btn').disabled = !allValid;
            
            return allValid;
        }

        function showError(errorId, message) {
            const errorEl = document.getElementById(errorId);
            errorEl.textContent = message;
            errorEl.classList.add('show');
        }

        function hideError(errorId) {
            const errorEl = document.getElementById(errorId);
            errorEl.classList.remove('show');
        }

        function showValidation(validationId, isValid) {
            const validationEl = document.getElementById(validationId);
            validationEl.className = `validation-icon ${isValid ? 'valid' : 'invalid'}`;
            validationEl.textContent = isValid ? '‚úì' : '‚úó';
        }

        // Location search functionality
        function searchLocation() {
            const query = document.getElementById('birthLocation').value;
            
            if (query.length < 3) {
                hideLocationDropdown();
                return;
            }
            
            // Clear previous timeout
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            
            // Debounce the search
            searchTimeout = setTimeout(() => {
                performLocationSearch(query);
            }, 300);
        }

        async function performLocationSearch(query) {
            const dropdown = document.getElementById('locationAutocomplete');
            
            try {
                showLocationStatus('Searching...');
                
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/search?format=json&limit=5&q=${encodeURIComponent(query)}`
                );
                
                const locations = await response.json();
                
                if (locations.length === 0) {
                    showLocationStatus('No locations found');
                    return;
                }
                
                displayLocationResults(locations);
                
            } catch (error) {
                console.error('Location search error:', error);
                showLocationStatus('Search unavailable');
            }
        }

        function displayLocationResults(locations) {
            const dropdown = document.getElementById('locationAutocomplete');
            
            dropdown.innerHTML = locations.map(location => `
                <div class="autocomplete-item" onclick="selectLocation('${location.display_name}', ${location.lat}, ${location.lon})">
                    <div class="location-name">${location.display_name.split(',')[0]}</div>
                    <div class="location-details">${location.display_name}</div>
                </div>
            `).join('');
            
            dropdown.style.display = 'block';
        }

        function selectLocation(name, lat, lon) {
            document.getElementById('birthLocation').value = name;
            currentLocationData = { name, lat, lon };
            hideLocationDropdown();
            validateLocation();
            validateForm();
        }

        function showLocationStatus(message) {
            const dropdown = document.getElementById('locationAutocomplete');
            dropdown.innerHTML = `<div class="search-status loading">${message}</div>`;
            dropdown.style.display = 'block';
        }

        function hideLocationDropdown() {
            document.getElementById('locationAutocomplete').style.display = 'none';
        }

        // Unknown time functionality
        function useUnknownTime() {
            document.getElementById('birthHour').value = '12';
            document.getElementById('birthMinute').value = '0';
            document.getElementById('ampm').value = 'PM';
            validateTime();
            validateForm();
        }

        // Soul Age Calculation
        async function calculateSoulAge() {
            const button = document.querySelector('.calculate-btn');
            button.disabled = true;
            button.textContent = 'üîÆ Calculating Your Soul Age...';
            
            // Simulate calculation time
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            try {
                const results = performSoulAgeCalculation();
                displayResults(results);
                
                // Scroll to results
                document.getElementById('results').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                
            } catch (error) {
                console.error('Calculation error:', error);
                alert('Sorry, there was an error calculating your soul age. Please try again.');
            } finally {
                button.disabled = false;
                button.textContent = '‚ú® Calculate My Soul Age ‚ú®';
            }
        }

        function performSoulAgeCalculation() {
            // Get form data
            const birthDate = new Date(document.getElementById('birthDate').value);
            const birthHour = document.getElementById('birthHour').value || '12';
            const birthMinute = document.getElementById('birthMinute').value || '0';
            const ampm = document.getElementById('ampm').value || 'PM';
            
            // Convert to 24-hour time (defaulting to noon if not specified)
            let hour24 = parseInt(birthHour);
            if (ampm === 'PM' && hour24 !== 12) hour24 += 12;
            if (ampm === 'AM' && hour24 === 12) hour24 = 0;
            
            const birthTime = new Date(birthDate.getFullYear(), birthDate.getMonth(), birthDate.getDate(), hour24, parseInt(birthMinute));
            
            // Calculate astrological factors
            const astroFactors = calculateAstrologicalFactors(birthTime, currentLocationData);
            
            // Get survey responses
            const surveyResponses = getSurveyResponses();
            
            // Calculate soul age
            const soulAge = calculateBaseSoulAge(astroFactors, surveyResponses);
            
            // Determine stage and characteristics
            const stage = determineSoulStage(soulAge);
            const characteristics = getSoulCharacteristics(stage, soulAge);
            
            return {
                soulAge: Math.round(soulAge),
                stage: stage.name,
                stageDescription: stage.description,
                range: stage.range,
                earthYears: soulAge * 65, // Average human lifespan
                spiralLevel: Math.ceil(soulAge / 111),
                remainingLives: Math.max(0, 777 - Math.round(soulAge)),
                confidence: calculateConfidence(astroFactors, surveyResponses),
                characteristics: characteristics
            };
        }

        function calculateAstrologicalFactors(birthTime, location) {
            // Simplified astrological calculation based on birth date and time
            const dayOfYear = Math.floor((birthTime - new Date(birthTime.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const hourOfDay = birthTime.getHours() + birthTime.getMinutes() / 60;
            
            // Mock Jaimini calculations
            const atmakaraka = (dayOfYear * 7 + hourOfDay) % 9; // 0-8 representing planets
            const arudhaLagna = (dayOfYear + hourOfDay * 15) % 12; // 0-11 representing houses
            const charaKarakas = Array.from({length: 7}, (_, i) => (atmakaraka + i) % 9);
            
            return {
                atmakaraka,
                arudhaLagna,
                charaKarakas,
                dayOfYear,
                hourOfDay
            };
        }

        function getSurveyResponses() {
            return {
                q1: document.getElementById('q1').value,
                q2: document.getElementById('q2').value,
                q3: document.getElementById('q3').value,
                q4: document.getElementById('q4').value,
                q5: document.getElementById('q5').value
            };
        }

        function calculateBaseSoulAge(astroFactors, surveyResponses) {
            // Base calculation from astrological factors
            let baseAge = astroFactors.dayOfYear + (astroFactors.hourOfDay * 10);
            baseAge += (astroFactors.atmakaraka * 50);
            baseAge += (astroFactors.arudhaLagna * 30);
            
            // Adjust based on survey responses
            const surveyAdjustment = calculateSurveyAdjustment(surveyResponses);
            baseAge += surveyAdjustment;
            
            // Normalize to 1-777 range
            return Math.min(777, Math.max(1, baseAge % 777));
        }

        function calculateSurveyAdjustment(responses) {
            let adjustment = 0;
            
            // Question 1: Life drive
            const q1Map = { 'survival': -100, 'pleasure': -50, 'success': 0, 'relationships': 100, 'meaning': 200 };
            adjustment += q1Map[responses.q1] || 0;
            
            // Question 2: Conflict handling
            const q2Map = { 'avoid': -100, 'fight': -50, 'compete': 0, 'understand': 100, 'transcend': 200 };
            adjustment += q2Map[responses.q2] || 0;
            
            // Question 3: Material possessions
            const q3Map = { 'essential': -100, 'enjoy': -50, 'status': 0, 'tools': 100, 'burden': 200 };
            adjustment += q3Map[responses.q3] || 0;
            
            // Question 4: Learning style
            const q4Map = { 'repetition': -100, 'experience': -50, 'systems': 0, 'reflection': 100, 'intuition': 200 };
            adjustment += q4Map[responses.q4] || 0;
            
            // Question 5: Attitude toward change
            const q5Map = { 'resist': -100, 'excitement': -50, 'opportunity': 0, 'natural': 100, 'catalyst': 200 };
            adjustment += q5Map[responses.q5] || 0;
            
            return adjustment;
        }

        function determineSoulStage(soulAge) {
            if (soulAge <= 155) {
                return {
                    name: 'Infant Soul',
                    description: 'You are in the early stages of human experience, learning basic survival and how to exist in a physical body.',
                    range: [1, 155]
                };
            } else if (soulAge <= 310) {
                return {
                    name: 'Baby Soul',
                    description: 'You are learning structure, rules, and how to belong to groups and communities.',
                    range: [156, 310]
                };
            } else if (soulAge <= 465) {
                return {
                    name: 'Young Soul',
                    description: 'You are focused on achievement, success, and making your mark in the world.',
                    range: [311, 465]
                };
            } else if (soulAge <= 620) {
                return {
                    name: 'Mature Soul',
                    description: 'You are exploring emotional depth, relationships, and authentic self-expression.',
                    range: [466, 620]
                };
            } else {
                return {
                    name: 'Old Soul',
                    description: 'You are seeking wisdom, spiritual truth, and ways to serve humanity\'s evolution.',
                    range: [621, 777]
                };
            }
        }

        function calculateConfidence(astroFactors, surveyResponses) {
            // Simple confidence calculation based on consistency of indicators
            let score = 0;
            
            // Check if astrological and survey indicators align
            const expectedSurveyStage = Math.floor((astroFactors.dayOfYear + astroFactors.atmakaraka * 50) / 155);
            const surveyAdjustment = calculateSurveyAdjustment(surveyResponses);
            const surveyStage = Math.floor((surveyAdjustment + 500) / 200);
            
            if (Math.abs(expectedSurveyStage - surveyStage) <= 1) score += 50;
            if (astroFactors.atmakaraka > 6) score += 25; // Higher planets indicate more experience
            if (currentLocationData) score += 25; // Having location data increases confidence
            
            if (score >= 75) return 'high';
            if (score >= 50) return 'medium';
            return 'low';
        }

        function getSoulCharacteristics(stage, soulAge) {
            const characteristics = {
                strengths: [],
                challenges: [],
                focus: [],
                practices: []
            };
            
            if (stage.name === 'Infant Soul') {
                characteristics.strengths = [
                    "Natural innocence and wonder",
                    "Strong survival instincts", 
                    "Ability to live in the present moment",
                    "Direct, uncomplicated approach to life"
                ];
                characteristics.challenges = [
                    "Fear of new experiences",
                    "Difficulty with complex emotions",
                    "Need for safety and routine",
                    "Limited perspective on life's bigger picture"
                ];
                characteristics.focus = [
                    "Basic survival and security",
                    "Learning to navigate physical world",
                    "Developing simple social skills",
                    "Building trust in others"
                ];
                characteristics.practices = [
                    "Grounding exercises and nature connection",
                    "Simple meditation and breathing",
                    "Gentle yoga and body awareness",
                    "Creating safe, nurturing environments"
                ];
            } else if (stage.name === 'Baby Soul') {
                characteristics.strengths = [
                    "Strong sense of right and wrong",
                    "Loyalty and commitment to groups",
                    "Appreciation for tradition and order",
                    "Reliable and responsible nature"
                ];
                characteristics.challenges = [
                    "Rigidity and resistance to change",
                    "Tendency to judge others harshly",
                    "Fear of stepping outside comfort zone",
                    "Difficulty accepting different viewpoints"
                ];
                characteristics.focus = [
                    "Building stable communities and families",
                    "Following moral and ethical guidelines",
                    "Preserving traditions and values",
                    "Creating order from chaos"
                ];
                characteristics.practices = [
                    "Group worship or spiritual community",
                    "Traditional meditation or prayer",
                    "Service work within established organizations",
                    "Study of moral and ethical teachings"
                ];
            } else if (stage.name === 'Young Soul') {
                characteristics.strengths = [
                    "High energy and ambition",
                    "Natural leadership abilities",
                    "Confidence and self-reliance",
                    "Ability to manifest goals"
                ];
                characteristics.challenges = [
                    "Ego-driven decision making",
                    "Difficulty with emotional depth",
                    "Tendency toward materialism",
                    "Impatience with others' limitations"
                ];
                characteristics.focus = [
                    "Achievement and worldly success",
                    "Building personal power and influence",
                    "Material accumulation and status",
                    "Individual recognition and fame"
                ];
                characteristics.practices = [
                    "Goal-setting and achievement practices",
                    "Competitive sports and challenges",
                    "Leadership development and networking",
                    "Success-oriented meditation and visualization"
                ];
            } else if (stage.name === 'Mature Soul') {
                characteristics.strengths = [
                    "Deep emotional intelligence",
                    "Capacity for intimate relationships",
                    "Authenticity and self-awareness",
                    "Natural counseling and healing abilities"
                ];
                characteristics.challenges = [
                    "Emotional intensity and drama",
                    "Difficulty with boundaries",
                    "Tendency toward co-dependency",
                    "Existential anxiety and questioning"
                ];
                characteristics.focus = [
                    "Deep personal relationships",
                    "Emotional healing and growth",
                    "Authentic self-expression",
                    "Psychological understanding"
                ];
                characteristics.practices = [
                    "Therapy and counseling work",
                    "Relationship and communication skills",
                    "Emotional healing modalities",
                    "Creative and artistic expression"
                ];
            } else { // Old Soul
                characteristics.strengths = [
                    "Natural wisdom and perspective",
                    "Compassion for all beings",
                    "Spiritual insight and intuition",
                    "Ability to see the bigger picture"
                ];
                characteristics.challenges = [
                    "Feeling disconnected from material world",
                    "Difficulty relating to younger souls",
                    "Tendency toward isolation",
                    "Impatience with society's pace"
                ];
                characteristics.focus = [
                    "Spiritual growth and enlightenment",
                    "Service to humanity",
                    "Teaching and sharing wisdom",
                    "Simple, meaningful living"
                ];
                characteristics.practices = [
                    "Meditation and contemplation",
                    "Service work and volunteering",
                    "Study of spiritual texts and teachings",
                    "Mentoring and teaching others"
                ];
            }
            
            return characteristics;
        }

        function displayResults(results) {
            // Update main display
            document.getElementById('soulAgeNumber').textContent = `~${results.soulAge}`;
            document.getElementById('soulStage').textContent = results.stage;
            document.getElementById('soulStageDescription').textContent = results.stageDescription;
            document.getElementById('incarnationRange').textContent = 
                `${results.range[0]}-${results.range[1]}`;
            document.getElementById('earthYears').textContent = 
                `~${Math.round(results.earthYears / 1000)}k`;
            document.getElementById('spiralLevel').textContent = 
                `${results.spiralLevel}${getOrdinalSuffix(results.spiralLevel)}`;
            document.getElementById('remainingLives').textContent = results.remainingLives;
            
            // Update confidence display
            const confidenceDot = document.getElementById('confidenceDot');
            const confidenceText = document.getElementById('confidenceText');
            confidenceDot.className = `confidence-dot confidence-${results.confidence}`;
            
            const confidenceLabels = {
                'high': 'High Confidence',
                'medium': 'Medium Confidence', 
                'low': 'Low Confidence'
            };
            confidenceText.textContent = confidenceLabels[results.confidence];
            
            // Update detailed stage description
            displayStageDescription(results.stage, results.stageDescription);
            
            // Update characteristics
            displayCharacteristics(results.characteristics);
            
            // Show results
            document.getElementById('results').classList.add('show');
        }

        function displayStageDescription(stageName, stageDescription) {
            const card = document.getElementById('stageDescriptionCard');
            const title = document.getElementById('stageDescriptionTitle');
            const text = document.getElementById('stageDescriptionText');
            
            title.textContent = `Understanding Your ${stageName} Nature`;
            text.textContent = stageDescription;
            
            // Add stage-specific styling
            card.className = 'stage-description-card';
            if (stageName.includes('Infant')) card.classList.add('infant');
            else if (stageName.includes('Baby')) card.classList.add('baby');
            else if (stageName.includes('Young')) card.classList.add('young');
            else if (stageName.includes('Mature')) card.classList.add('mature');
            else if (stageName.includes('Old')) card.classList.add('old');
        }

        function displayCharacteristics(characteristics) {
            const container = document.getElementById('characteristicsDisplay');
            
            container.innerHTML = `
                <div class="characteristics-grid">
                    <div class="characteristic-card">
                        <h3 class="characteristic-title">Your Strengths</h3>
                        <ul class="characteristic-list">
                            ${characteristics.strengths.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="characteristic-card">
                        <h3 class="characteristic-title">Growth Challenges</h3>
                        <ul class="characteristic-list">
                            ${characteristics.challenges.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="characteristic-card">
                        <h3 class="characteristic-title">Life Focus Areas</h3>
                        <ul class="characteristic-list">
                            ${characteristics.focus.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="characteristic-card">
                        <h3 class="characteristic-title">Recommended Practices</h3>
                        <ul class="characteristic-list">
                            ${characteristics.practices.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }

        function getOrdinalSuffix(number) {
            const suffixes = ['th', 'st', 'nd', 'rd'];
            const value = number % 100;
            return suffixes[(value - 20) % 10] || suffixes[value] || suffixes[0];
        }

        // FAQ functionality
        function toggleFaq(questionElement) {
            const answer = questionElement.nextElementSibling;
            const toggle = questionElement.querySelector('.faq-toggle');
            
            if (answer.classList.contains('show')) {
                answer.classList.remove('show');
                toggle.classList.remove('rotated');
            } else {
                // Close all other FAQs
                document.querySelectorAll('.faq-answer.show').forEach(openAnswer => {
                    openAnswer.classList.remove('show');
                    openAnswer.previousElementSibling.querySelector('.faq-toggle').classList.remove('rotated');
                });
                
                // Open this FAQ
                answer.classList.add('show');
                toggle.classList.add('rotated');
            }
        }

        // Click outside to close location dropdown
        document.addEventListener('click', function(event) {
            const locationInput = document.getElementById('birthLocation');
            const dropdown = document.getElementById('locationAutocomplete');
            
            if (!locationInput.contains(event.target) && !dropdown.contains(event.target)) {
                hideLocationDropdown();
            }
        });
    </script>
</body>
</html>
